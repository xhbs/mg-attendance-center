!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).vplay={},e.React)}(this,(function(e,t){"use strict";function n(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t),e}}var s="default"in t?t.default:t;function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}class r{constructor(){this.eventMap=new Map(),this.allEventMap=new Set(),this.singleEventMap=new Map(),this._disabled=!1}static transferEvent(e,t){e.onevery((e,...n)=>t.emit(e,...n))}disable(e=!0){this._disabled=e}copyEvent(e){e.eventMap.forEach((e,t)=>this.eventMap.set(t,new Set(e))),e.allEventMap.forEach(e=>this.allEventMap.add(e)),e.singleEventMap.forEach((e,t)=>this.singleEventMap.set(t,new Set(e)))}getEventMap(e,t){return e.get(t)||e.set(t,new Set()),e.get(t)}on(e,t){const n=this.getEventMap(this.eventMap,e);return n.add(t),()=>n.delete(t)}once(e,t){this.getEventMap(this.singleEventMap,e).add(t)}onevery(e){this.allEventMap.add(e)}emit(e,...t){if(this._disabled)return;this.getEventMap(this.eventMap,e).forEach(e=>e(...t));const n=this.getEventMap(this.singleEventMap,e);n.forEach(e=>{e(...t),n.delete(e)}),this.allEventMap.forEach(n=>n(e,...t))}unEvent(e){this.eventMap.delete(e),this.singleEventMap.delete(e)}destory(){this.eventMap.clear(),this.allEventMap.clear(),this.singleEventMap.clear()}}function o(e){return{setStatus:t=>function(e,t){e.status=t}(e,t),hasStatus:t=>function(e,t){return e.status&t}(e,t),contactStatus:t=>function(e,t){e.status|=t}(e,t),removeStatus:t=>function(e,t){e.status&=~t}(e,t),replaceStatus:(t,n)=>function(e,t,n){e.status&=~t,e.status|=n}(e,t,n)}}let a=0;const l=["#d64e4e","#bada55","#7ec699"];const c=new Map();class u{constructor(e){this.name=void 0,this.color=void 0,c.set(e,!0),this.name=e,this.color=`\n    color: ${l[a]};\n    font-style: italic;\n    padding: 2px;\n    width: 100px;\n  `,a++}log(e,...t){console[e](`%c${this.name}:`,this.color,...t)}info(e,...t){e&&this.log("log",...t)}group(...e){}groupEnd(...e){}debug(...e){}warn(e,t,...n){return e&&console.log(`%c${this.name}:`,this.color,t,...n),e}error(e,...t){return e&&this.log("error",...t),e}}u.level=1;class h{constructor(){this.log=new u("basic-download"),this.status=0,this._onerror=null,this._onDownBuffer=null,this._onDownMessage=null,this._onpause=null,this._onresume=null,this._contentLength=0,this._receivedLength=0}set onerror(e){this._onerror=e}set onpause(e){this._onpause=e}set onresume(e){this._onresume=e}set contentLength(e){this._contentLength=e}set onDownBuffer(e){this._onDownBuffer=e}set onDownMessage(e){this._onDownMessage=e}open(){return this.log.debug('it\'s virutal function "open", please implements it'),Promise.resolve()}pause(){this.log.debug('it\'s virutal function "pause", please implements it')}resume(){this.log.debug('it\'s virutal function "resume", please implements it')}destory(){this.log.debug('it\'s virutal function "destory", please implements it')}isDone(){return this.log.debug('it\'s virutal function "isDone", please implements it'),!1}}function d(){}function p(){let e=[d,d];const t=new Promise((t,n)=>{e=[t,n]});return[e,t]}const m=new u("downloader");class f extends h{constructor(e){super(),this.url="",this.socket=void 0,this.onmessage=e=>{const t=e.data;if(t instanceof ArrayBuffer)this._onDownBuffer&&this._onDownBuffer(t,this.isDone());else if(t instanceof Blob){const e=new FileReader();e.onload=()=>{this._onDownBuffer&&this._onDownBuffer(e.result,this.isDone())},e.readAsArrayBuffer(t)}else"string"==typeof t&&this._onDownMessage&&this._onDownMessage(JSON.parse(t))},this.onclose=e=>{m.warn(!0,"socket connect closed")},this.url=e}open(){const[e,t]=p();try{const t=new WebSocket(this.url);t.binaryType="arraybuffer",t.onmessage=this.onmessage;let n=!1;t.onopen=()=>{m.debug(`${this.url} opened`),n=!0,e[0]()},t.onerror=t=>{m.error(!0,t);const s=n?t.type:"network error 22";this._onerror&&this._onerror(s),e[1](t)},t.onclose=this.onclose,this.socket=t}catch(e){this._onerror&&this._onerror("network error 22")}return t}pause(){this._onpause&&this._onpause()}seek(){m.debug("download pause")}resume(){this._onresume&&this._onresume()}destory(){this.socket.close()}isDone(){return!1}}let y;!function(e){e[e.OPEN=1]="OPEN",e[e.PAUSE=2]="PAUSE",e[e.RESUME=4]="RESUME",e[e.DONE=8]="DONE"}(y||(y={}));class b extends h{constructor(e){super(),this.url="",this.url=e}open(){this.status=y.OPEN;let e=new Headers(),t={method:"GET",headers:e,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};return e.set("Range",`bytes=${this._receivedLength}-`),fetch(this.url,t).then(e=>{if(!e.ok||!(e.status>=200&&e.status<=299))return;const t=e.headers.get("Content-Length");null!=t&&(this._contentLength=this._contentLength||parseInt(t),this.pump(e.body.getReader()))})}async pump(e){if(this.status&y.PAUSE)return void e.cancel();const t=await e.read();if(t.done)null!==this._contentLength&&this._receivedLength<this._contentLength||(this.status=y.DONE);else{const n=t.value.buffer;this._receivedLength+=n.byteLength,this._receivedLength===this._contentLength&&(this.status=y.DONE),this._onDownBuffer(n,this.isDone()),this.pump(e)}}pause(){this.status=y.PAUSE}resume(){this.status&y.OPEN||(this._receivedLength>=this._contentLength?console.log("已经缓冲完成"):(this.status=y.OPEN,this.open()))}isDone(){return!!(this.status&y.DONE)}}const g={create:function(e){const{url:t,type:n}=e;switch(n){case"http":return new b(t);case"ws":return new f(t);default:return new b(t)}},destory:function(e){e.destory(),e.onDownBuffer=null,e=null}};let v,Z;!function(e){e[e.LOAD=1]="LOAD",e[e.LOADDATA=2]="LOADDATA",e[e.PLAYING=4]="PLAYING",e[e.PAUSE=8]="PAUSE",e[e.DISCARD=16]="DISCARD",e[e.FPLAY=32]="FPLAY"}(v||(v={}));class V extends r{constructor(e,t){super(),this.el=void 0,this.parent=void 0,this.url=void 0,this.urltype=void 0,this.isLive=!1,this.error=null,this.status=0,this.statusUtil=o(this),this.log=void 0,this.download=null,this.downBufctl=null,this.avParams=null,this.playParams=void 0,this.now=0,this.lastV=0,this.lastA=0,this.lastAEnd=0,this.endV=0,this.endA=0,this.avTag=0,this._actualTime=0,this._currentTime=0,this._animateTime=void 0,this._playbackRate=1,this._volume=0,this._controls=!0,this.shouldRender=void 0,this.onerror=e=>{if(e){if(this.error)return;this.emit("error",e),this.error=e}else this.error=null},this.onDownload=null,this.onDownloadMsg=e=>{this.emit("downmsg",e)},this.onDownloadErr=e=>{this.emit("downerror",e)},this._resetAnimate=()=>{this.now=Date.now()},this._animate=()=>{if(!this.statusUtil.hasStatus(v.PLAYING))return;this._animateTime=requestAnimationFrame(this._animate);const e=Date.now(),t=(e-this.now)*this._playbackRate;this.now=e,this._actualTime+=t,this._currentTime+=t;const n=Math.max(this.endA,this.endV);this._currentTime>n&&(this._currentTime=n),this.onLoop(this._currentTime,t)},this.log=new u(t),this.setOptions(e)}bindElement(e){this.parent.appendChild(e),this.el=e}setOptions(e){this.url=e.url,this.urltype=e.type,this.parent=e.el,this.isLive=e.isLive||!1}copyStatus(e){super.copyEvent(e),this._controls=e._controls,this._volume=e._volume,this._playbackRate=e._playbackRate}async load(){if(this.log.warn(this.statusUtil.hasStatus(v.LOAD),"请勿重复加载视频"))throw 1;this.emit("loadstart"),this.emit("waiting")}async reload(){this._currentTime=0,this._actualTime=0,this.statusUtil.removeStatus(v.LOADDATA),this.pause(!1),this.destoryDownload(),await this.loadDownload(),this.play(!1)}loadDownload(){return this.download=g.create({url:this.url,type:this.urltype}),this.download.onDownBuffer=this.onDownload,this.download.onDownMessage=this.onDownloadMsg,this.download.onerror=this.onDownloadErr,this.download.open()}destoryDownload(){this.download&&g.destory(this.download),this.download=null,this.downBufctl&&this.downBufctl.cancelCheck(),this.downBufctl=null}framePlay(){}play(e){return this.log.warn(!this.statusUtil.hasStatus(v.LOAD),"视频还未加载成功")?(this.emit("waiting"),!1):!this.log.warn(this.statusUtil.hasStatus(v.PLAYING),"请勿重复调用")&&(this.statusUtil.replaceStatus(v.PAUSE,v.PLAYING),this.emit("playing"),!0)}pause(e){return this.log.warn(!this.statusUtil.hasStatus(v.LOAD),"视频还未加载")?(this.emit("waiting"),!1):(e&&this.emit("pause"),this.statusUtil.replaceStatus(v.PLAYING,v.PAUSE),this.downBufctl.pause(),this.downBufctl.cancelCheck(),!0)}async seek(e){this.log.warn(!this.statusUtil.hasStatus(v.LOAD),"视频还未加载")?this.emit("waiting"):(this.emit("seeking"),e&&await e(),await this.reload(),this.emit("seeked"))}destory(){this.status=v.DISCARD,this.destoryDownload(),this.emit("destory"),super.destory(),cancelAnimationFrame(this._animateTime),this.parent&&(this.parent.removeChild(this.el),this.parent=null),this.el=null}syncAudio(e,t=20){return e+t<=this._currentTime?-1:e>this._currentTime+t?1:0}syncContorl(e,t){const n=Math.abs(e-t);return n<200?0:t>e?(this.log.info(1!==this.avTag,`视频超前 ${n}ms, 暂停视频`),this.avTag=1,-1):(this.log.info(2!==this.avTag,`视频落后 ${n}ms, 调整时间至${e}, 总时长${this.endV}`),this.avTag=2,e)}onLoop(e,t){}set currentTime(e){}get currentTime(){return null}set playbackRate(e){this._playbackRate=e,this.emit("ratechange",e)}get playbackRate(){return this._playbackRate}set volume(e){this._volume!==e&&(this._volume=e,this.emit("volumechange",e))}get volume(){return this._volume}set controls(e){this._controls!==e&&(this._controls=e,this.emit("controls",e))}get debugInfo(){return null}setSize(e,t,n,s){this.el instanceof HTMLCanvasElement&&(this.el.width=n,this.el.height=s),this.parent.style.width=e+"px",this.parent.style.height=t+"px"}}!function(e){e.LOAD="0x00000001",e.MODULE="MODULE",e.INIT="0x00000010",e.DESTORY="DESTORY",e.OPEN="0x00000100",e.FLUSH="FLUSH",e.RECEIVE="0x00001000",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.START="0x00010000",e.STOP="0x00100000",e.DECODE="0x01000000",e.FAILED="0x10000000",e.LOST="LOST"}(Z||(Z={}));const R=Z;let G,L;!function(e){e.ERROR="error",e.LOADING_COMPLETE="loading_complete",e.RECOVERED_EARLY_EOF="recovered_early_eof",e.MEDIA_INFO="media_info",e.METADATA_ARRIVED="metadata_arrived",e.SCRIPTDATA_ARRIVED="scriptdata_arrived",e.STATISTICS_INFO="statistics_info"}(G||(G={})),function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.LOAD=4]="LOAD",e[e.OPEN=8]="OPEN"}(L||(L={}));const x=new u("decoder");class w extends r{constructor(e,t){super(),this.props=void 0,this.status=0,this.statusUtil=o(this),this.decodeWorker=void 0,this.getWorker=void 0,this.downloadBytes=0,this._onerror=null,this.onAVFrame=void 0,this.onAVLost=void 0,this.pendingFrames=0,this.lossFrames=0,this.onmessage=e=>{const{type:t,pending:n}=e.data;switch(t){case Z.OPEN:this.statusUtil.contactStatus(L.OPEN),this.emit(t,e.data);break;case Z.AUDIO:case Z.VIDEO:this.onAVFrame(e.data);case R.FAILED:this.pendingFrames=n;break;case R.LOST:this.onAVLost(e.data);default:x.debug(`not valid type [${t}]`)}},this.onDownloadBuffer=(e,t)=>{this.pendingFrames++,this.downloadBytes+=e.byteLength,this.sendBuffer(e),t&&(this.pendingFrames=NaN)},this.props=e,this.getWorker=t,this.statusUtil.setStatus(L.UNKNOWN)}async load(){x.debug("prepare for load decoder"),this.decodeWorker=await this.getWorker(),this.decodeWorker.onmessage=this.onmessage,this.statusUtil.setStatus(L.LOAD)}postMessage(e,t){t instanceof ArrayBuffer?this.decodeWorker.postMessage(t,[t]):this.decodeWorker.postMessage({type:e,data:t})}getVideoParams(){const[e,t]=p();return this.once(Z.OPEN,t=>{e[0](t)}),t}startDecoding(){this.postMessage(R.START)}stopDecoding(){this.postMessage(R.STOP)}seekDecoding(){}flushBuffers(){this.postMessage(Z.FLUSH)}sendBuffer(e){this.postMessage(R.RECEIVE,e)}destory(){this.pendingFrames=0,this.downloadBytes=0}isDone(){return NaN===this.pendingFrames}set onerror(e){this._onerror=e}}const X="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),W=X&&"function"==typeof module.require?module.require:null;const S=function(e,t=null,n=!1){const s=X?function(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}(e,n):function(e,t){const n=atob(e);if(t){const e=new Uint8Array(n.length);return Array.prototype.forEach.call(e,(e,t,s)=>{s[t]=n.charCodeAt(t)}),String.fromCharCode.apply(null,new Uint16Array(e.buffer))}return n}(e,n),i=s.indexOf("\n",10)+1,r=s.substring(i)+(t?`//# sourceMappingURL=${t}`:"");if(W){const e=W("worker_threads").Worker;return function(t){return new e(r,Object.assign({},t,{eval:!0}))}}const o=new Blob([r],{type:"application/javascript"}),a=URL.createObjectURL(o);return function(e){return new Worker(a,e)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwpsZXQgZT0wO2NvbnN0IHQ9WyIjZDY0ZTRlIiwiI2JhZGE1NSIsIiM3ZWM2OTkiXTtjb25zdCBzPW5ldyBNYXA7Y2xhc3MgaXtjb25zdHJ1Y3RvcihpKXt0aGlzLm5hbWU9dm9pZCAwLHRoaXMuY29sb3I9dm9pZCAwLHMuc2V0KGksITApLHRoaXMubmFtZT1pLHRoaXMuY29sb3I9YFxuICAgIGNvbG9yOiAke3RbZV19O1xuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgd2lkdGg6IDEwMHB4O1xuICBgLGUrK31sb2coZSwuLi50KXtjb25zb2xlW2VdKGAlYyR7dGhpcy5uYW1lfTpgLHRoaXMuY29sb3IsLi4udCl9aW5mbyhlLC4uLnQpe2UmJnRoaXMubG9nKCJsb2ciLC4uLnQpfWdyb3VwKC4uLmUpe31ncm91cEVuZCguLi5lKXt9ZGVidWcoLi4uZSl7fXdhcm4oZSx0LC4uLnMpe3JldHVybiBlJiZjb25zb2xlLmxvZyhgJWMke3RoaXMubmFtZX06YCx0aGlzLmNvbG9yLHQsLi4ucyksZX1lcnJvcihlLC4uLnQpe3JldHVybiBlJiZ0aGlzLmxvZygiZXJyb3IiLC4uLnQpLGV9fWZ1bmN0aW9uIHIoZSl7Y29uc3QgdD1lLmJ1ZmZlci5nZXRVaW50OChlLmN1cnJlbnQpO3JldHVybiBlLmN1cnJlbnQrPTEsdH1mdW5jdGlvbiBvKGUpe2NvbnN0IHQ9ZS5idWZmZXIuZ2V0VWludDE2KGUuY3VycmVudCk7cmV0dXJuIGUuY3VycmVudCs9Mix0fWkubGV2ZWw9MTtjbGFzcyBue3N0YXRpYyBnZXRTdHJlYW0oZSx0KXtjb25zdCBzPU9iamVjdC5jcmVhdGUobmV3IG4oZSkpO3JldHVybiB0JiZPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGU9PntzW2VdPXRbZV19KSxzfWNvbnN0cnVjdG9yKGUpe3RoaXMuc3RhcnQ9MCx0aGlzLmVuZD0wLHRoaXMuZXh0cmFSYW5nZT1udWxsLHRoaXMuX2J1ZmZlcj12b2lkIDAsdGhpcy5fYnVmZmVyPWV9YnVmZmVyKCl7aWYodGhpcy5leHRyYVJhbmdlKXtjb25zdCBlPXRoaXMuZW5kLXRoaXMuc3RhcnQ7bGV0IHQ9ZTt0aGlzLmV4dHJhUmFuZ2UuZm9yRWFjaChlPT50Kz1lWzJdKTtjb25zdCBzPW5ldyBVaW50OEFycmF5KHQpLGk9W1t0aGlzLnN0YXJ0LHRoaXMuZW5kLGVdLC4uLnRoaXMuZXh0cmFSYW5nZV07bGV0IHI9MDtyZXR1cm4gaS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMuX2J1ZmZlci5zbGljZShlWzBdLGVbMV0pO3Muc2V0KG5ldyBVaW50OEFycmF5KHQpLHIpLHIrPWVbMl19KSxzLmJ1ZmZlcn1yZXR1cm4gdGhpcy5fYnVmZmVyLnNsaWNlKHRoaXMuc3RhcnQsdGhpcy5lbmQpfW1lcmdlKGUpe3RoaXMuZXh0cmFSYW5nZXx8KHRoaXMuZXh0cmFSYW5nZT1bXSksdGhpcy5leHRyYVJhbmdlLnB1c2goW2Uuc3RhcnQsZS5lbmQsZS5lbmQtZS5zdGFydF0pfX1mdW5jdGlvbiBhKGUpe2NvbnN0IHQ9KDE0JnIoZSkpPDwyOSxzPSg2NTUzNCZvKGUpKTw8MTQsaT0oNjU1MzQmbyhlKSk+PjE7cmV0dXJuIE1hdGgucm91bmQoKHQ+Pj4wKStzK2kpfWZ1bmN0aW9uIGQoZSl7bGV0IHQ9ZS5idWZmZXIuYnl0ZUxlbmd0aC1lLmN1cnJlbnQscz0wO2Zvcig7dD4wOyl7dC0tO2NvbnN0IGk9cztpZihzPTE2Nzc3MjE1JihzPDw4fHIoZSkpLDE9PT1pKXJldHVybiBzfXJldHVybi0xfWNsYXNzIGh7Y29uc3RydWN0b3IoKXt0aGlzLm5hbWU9InBzIHN0cmVhbSIsdGhpcy52aWRlb1R5cGU9dm9pZCAwLHRoaXMuYXVkaW9UeXBlPXZvaWQgMCx0aGlzLnN0cmVhbXM9W119cHJvYmUoZSl7cmV0dXJuIHRoaXMucGFyc2UoZSksdGhpcy52aWRlb1R5cGV9cGFyc2VQU01IKGUpe2NvbnN0IHQ9byhlKTtyKGUpLHIoZSksbyhlKSxvKGUpO2xldCBzPXQtMC0xMDtmb3IoO3M+PTQ7KXtjb25zdCB0PXIoZSk7cihlKSxvKGUpLHRoaXMudmlkZW9UeXBlP3RoaXMuYXVkaW9UeXBlPXQ6dGhpcy52aWRlb1R5cGU9dCxzLT00fX1wYXJzZVBFUyhlLHQpe2NvbnN0IHM9byhlKSxpPWUuY3VycmVudC0xK3M7cihlKTtjb25zdCBuPXIoZSksZD1yKGUpLGg9ZS5jdXJyZW50K2Q7MTI4Jm4mJih0LnB0cz1hKGUpLDY0Jm4mJmEoZSkpLHQuc3RhcnQ9aCx0LmVuZD1pKzEsZS5jdXJyZW50PWl9cGFyc2UoZSl7dGhpcy5jbGVhcigpO2NvbnN0IHQ9ZnVuY3Rpb24oZSx0PTAscyl7KHN8fDAhPT10KSYmKHM9c3x8ZS5ieXRlTGVuZ3RoKzEsZT1lLnNsaWNlKHQscykpO2NvbnN0IGk9bmV3IERhdGFWaWV3KGUpO3JldHVybntidWZmZXI6aSxjdXJyZW50OjAsdmFsdWU6aS5nZXRVaW50MzIoMCksYml0czowLGF2YWxpYWJlOjMyLGluZGV4OjB9fShlKTtsZXQgcz0hMSxpPXt9LHI9bnVsbDtmb3IoO3I9ZCh0KTspe2lmKC0xPT09cilyZXR1cm47c3dpdGNoKHIpe2Nhc2UgNDQyOnM9ITA7YnJlYWs7Y2FzZSA0NDM6YnJlYWs7Y2FzZSA0NDQ6dGhpcy5wYXJzZVBTTUgodCk7YnJlYWs7Y2FzZSA0ODA6Y2FzZSA0NDg6Y29uc3Qgbz0yNTUmcixhPW4uZ2V0U3RyZWFtKGUpO2EuaWQ9byx0aGlzLnBhcnNlUEVTKHQsYSksIXMmJmlbb10mJmlbb10ucHRzPT09YS5wdHM/aVtvXS5tZXJnZShhKToodGhpcy5zdHJlYW1zLnB1c2goYSksaVtvXT1hLHM9ITEpfX19Y2xlYXIoKXt0aGlzLnN0cmVhbXM9W119fWxldCBjOyFmdW5jdGlvbihlKXtlLkxPQUQ9IjB4MDAwMDAwMDEiLGUuTU9EVUxFPSJNT0RVTEUiLGUuSU5JVD0iMHgwMDAwMDAxMCIsZS5ERVNUT1JZPSJERVNUT1JZIixlLk9QRU49IjB4MDAwMDAxMDAiLGUuRkxVU0g9IkZMVVNIIixlLlJFQ0VJVkU9IjB4MDAwMDEwMDAiLGUuVklERU89IlZJREVPIixlLkFVRElPPSJBVURJTyIsZS5TVEFSVD0iMHgwMDAxMDAwMCIsZS5TVE9QPSIweDAwMTAwMDAwIixlLkRFQ09ERT0iMHgwMTAwMDAwMCIsZS5GQUlMRUQ9IjB4MTAwMDAwMDAiLGUuTE9TVD0iTE9TVCJ9KGN8fChjPXt9KSk7Y29uc3QgdT1jO2xldCBmOyFmdW5jdGlvbihlKXtlLkVSUk9SPSJlcnJvciIsZS5MT0FESU5HX0NPTVBMRVRFPSJsb2FkaW5nX2NvbXBsZXRlIixlLlJFQ09WRVJFRF9FQVJMWV9FT0Y9InJlY292ZXJlZF9lYXJseV9lb2YiLGUuTUVESUFfSU5GTz0ibWVkaWFfaW5mbyIsZS5NRVRBREFUQV9BUlJJVkVEPSJtZXRhZGF0YV9hcnJpdmVkIixlLlNDUklQVERBVEFfQVJSSVZFRD0ic2NyaXB0ZGF0YV9hcnJpdmVkIixlLlNUQVRJU1RJQ1NfSU5GTz0ic3RhdGlzdGljc19pbmZvIn0oZnx8KGY9e30pKTtjbGFzcyBse2NvbnN0cnVjdG9yKCl7dGhpcy5idWZmZXI9W10sdGhpcy5jb21wbGV0ZT0hMSx0aGlzLm5leHQ9bnVsbCx0aGlzLnRvdGFsTGVuZ3RoPTB9YWRkQnVmZmVyKGUpe3RoaXMuYnVmZmVyLnB1c2goZSksdGhpcy50b3RhbExlbmd0aCs9ZS5ieXRlTGVuZ3RofWlzRW5kKCl7cmV0dXJuIHRoaXMuY29tcGxldGV9ZW5kT2ZCdWZmZXIoKXt0aGlzLmNvbXBsZXRlPSEwfWdldEJ1ZmZlcigpe2lmKDA9PT10aGlzLnRvdGFsTGVuZ3RoKXJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7aWYoMT09PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gdGhpcy5idWZmZXJbMF07Y29uc3QgZT1uZXcgVWludDhBcnJheSh0aGlzLnRvdGFsTGVuZ3RoKTtsZXQgdD0wO2ZvcihsZXQgcz0wO3M8dGhpcy5idWZmZXIubGVuZ3RoO3MrKyl7Y29uc3QgaT1uZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcltzXSk7ZS5zZXQoaSx0KSx0Kz1pLmJ5dGVMZW5ndGh9cmV0dXJuIGUuYnVmZmVyfX1jbGFzcyBte2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5saW1pdD12b2lkIDAsdGhpcy5sb2c9dm9pZCAwLHRoaXMuY291bnQ9MCx0aGlzLmZpcnN0RnJhbWU9bnVsbCx0aGlzLmN1cnJlbnRGcmFtZT1udWxsLHRoaXMubGltaXQ9ZSx0aGlzLmxvZz1uZXcgaSh0KX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuY291bnR9Y3JlYXRlRnJhbWUoKXtjb25zdCBlPW5ldyBsO3JldHVybiB0aGlzLmVucXVldWUoZSksZX1lbnF1ZXVlKGUpe3RoaXMuY291bnQ+dGhpcy5saW1pdD90aGlzLmxvZy5lcnJvcighMCxgbWF4IExpbWl0ICR7dGhpcy5saW1pdH1gKToodGhpcy5jdXJyZW50RnJhbWU/KHRoaXMuY3VycmVudEZyYW1lLm5leHQ9ZSx0aGlzLmN1cnJlbnRGcmFtZT1lKToodGhpcy5jdXJyZW50RnJhbWU9ZSx0aGlzLmZpcnN0RnJhbWU9bmV3IGwsdGhpcy5maXJzdEZyYW1lLm5leHQ9ZSksdGhpcy5jb3VudCsrKX1kZXF1ZXVlKCl7aWYoMD09PXRoaXMuY291bnQpcmV0dXJuIG51bGw7dGhpcy5jb3VudC0tO2NvbnN0IGU9dGhpcy5maXJzdEZyYW1lLm5leHQ7cmV0dXJuIHRoaXMuZmlyc3RGcmFtZT1lLGV9fWNvbnN0IGc9bmV3IGkoImRlY29kZXJXb3JrZXIiKTtjbGFzcyBwe2NvbnN0cnVjdG9yKCl7dGhpcy5Nb2R1bGU9dm9pZCAwLHRoaXMudmlkZW9QYXJhbXM9dm9pZCAwLHRoaXMuYXVkaW9QYXJhbXM9dm9pZCAwLHRoaXMuZGVjb2RlRnJhbWU9dm9pZCAwLHRoaXMuaW50ZXJ2YWw9dm9pZCAwLHRoaXMuaW50ZXJ2YWxUaW1lPTEwLHRoaXMuZGVjb2RlVGltZT0wLHRoaXMubG9hZENhbGxiYWNrPShlLHQscyxpKT0+e3RoaXMudmlkZW9QYXJhbXM9e2hlaWdodDplLHdpZHRoOnQscmF0ZTpzfSxnLmRlYnVnKCJ2aWRlbyBwYXJhbXMiLHRoaXMudmlkZW9QYXJhbXMpLGkvPTQ7Y29uc3Qgcj10aGlzLk1vZHVsZS5IRUFQVTMyLnN1YmFycmF5KGksaSszKTswPT09clswXT9nLmRlYnVnKCJubyBhdWRpbyBzdHJlYW0iKToodGhpcy5hdWRpb1BhcmFtcz17c2FtcGxlRm10OnJbMF0sY2hhbm5lbHM6clsxXSxzYW1wbGVSYXRlOnJbMl19LGcuZGVidWcoImF1ZGlvIHN0cmVhbSIsdGhpcy5hdWRpb1BhcmFtcykpfSx0aGlzLnZpZGVvQ2FsbGJhY2s9KGUsdCxzKT0+e2NvbnN0IGk9dGhpcy5Nb2R1bGUuSEVBUFU4LnN1YmFycmF5KGUsZSt0KSxyPW5ldyBVaW50OEFycmF5KGkpO3RoaXMuZGVjb2RlVGltZT1EYXRlLm5vdygpLXRoaXMuZGVjb2RlVGltZSx0aGlzLmRlY29kZUZyYW1lPXt0eXBlOiJ2aWRlbyIscHRzOk1hdGgucm91bmQoMWUzKnMpLGRlY29kZVRpbWU6dGhpcy5kZWNvZGVUaW1lLGJ1ZmZlcjpyfX0sdGhpcy5hdWRpb0NhbGxiYWNrPShlLHQscyk9Pntjb25zdCBpPXRoaXMuTW9kdWxlLkhFQVBVOC5zdWJhcnJheShlLGUrdCkscj1uZXcgVWludDhBcnJheShpKTt0aGlzLmRlY29kZVRpbWU9RGF0ZS5ub3coKS10aGlzLmRlY29kZVRpbWUsdGhpcy5kZWNvZGVGcmFtZT17dHlwZToiYXVkaW8iLHB0czpNYXRoLnJvdW5kKDFlMypzKSxkZWNvZGVUaW1lOnRoaXMuZGVjb2RlVGltZSxidWZmZXI6cn19LHRoaXMuTW9kdWxlPU1vZHVsZSx0aGlzLnZpZGVvUGFyYW1zPXt3aWR0aDowLGhlaWdodDowLHJhdGU6MH0sdGhpcy5Nb2R1bGUuX3NldExvZ0xldmVsKDApfWluaXREZWNvZGVyKCl7Y29uc3QgZT10aGlzLk1vZHVsZS5hZGRGdW5jdGlvbih0aGlzLmxvYWRDYWxsYmFjayksdD10aGlzLk1vZHVsZS5hZGRGdW5jdGlvbih0aGlzLnZpZGVvQ2FsbGJhY2spLHM9dGhpcy5Nb2R1bGUuYWRkRnVuY3Rpb24odGhpcy5hdWRpb0NhbGxiYWNrKTt0aGlzLk1vZHVsZS5faW5pdERlY29kZXIoZSx0LHMpLGcuZGVidWcoImluaXQgZGVjb2RlcldvcmtlciBzdWNjZXNzIil9ZGVzdG9yeURlY29kZXIoKXt0aGlzLk1vZHVsZS5fZGVzdG9yeURlY29kZXIoKX1vcGVuRGVjb2RlcihlKXt0aGlzLk1vZHVsZS5fb3BlbkRlY29kZXIoZSk7cmV0dXJuIGcuZGVidWcoIm9wZW4gZGVjb2RlcldvcmtlciBzdWNjZXNzIikse3ZpZGVvOnRoaXMudmlkZW9QYXJhbXMsYXVkaW86dGhpcy5hdWRpb1BhcmFtc319Zmx1c2hCdWZmZXJzKCl7dGhpcy5Nb2R1bGUuX2ZsdXNoQnVmZmVycygpfWRlb2NkZSgpe3JldHVybiB0aGlzLmRlY29kZVRpbWU9RGF0ZS5ub3coKSwwIT09dGhpcy5Nb2R1bGUuX2RlY29kaW5nKCk/bnVsbDp0aGlzLmRlY29kZUZyYW1lfXNlbmRQYWNrZXQoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKSxzPU1vZHVsZS5fbWFsbG9jKHQuYnl0ZUxlbmd0aCk7TW9kdWxlLkhFQVBVOC5zZXQodCxzKSxNb2R1bGUuX3NlbmRQYWNrZXQocyx0LmJ5dGVMZW5ndGgpfX12YXIgRTshZnVuY3Rpb24oZSl7ZVtlLlVOS05PV049MF09IlVOS05PV04iLGVbZS5MT0FEPTFdPSJMT0FEIixlW2UuUkVDRUlWRVNQUz0yXT0iUkVDRUlWRVNQUyIsZVtlLlBSRVBBUkU9NF09IlBSRVBBUkUiLGVbZS5ERUNPREU9OF09IkRFQ09ERSIsZVtlLkRFQ09ESU5HPTE2XT0iREVDT0RJTkciLGVbZS5QQVVTRT0zMl09IlBBVVNFIixlW2UuV0FTTUJVRkZFUkZVTEw9NjRdPSJXQVNNQlVGRkVSRlVMTCIsZVtlLkRPV05MQlVGRkVSPTEyOF09IkRPV05MQlVGRkVSIixlW2UuQlVGRkVSRlVMTD0yNTZdPSJCVUZGRVJGVUxMIixlW2UuRE9XTkxPQURET1dOPTUxMl09IkRPV05MT0FERE9XTiIsZVtlLkRPTkU9MTAyNF09IkRPTkUifShFfHwoRT17fSkpO2NvbnN0IEQ9bmV3IGkoImRlY29kZXIiKTtjbGFzcyBGe2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvcHM9dm9pZCAwLHRoaXMucHNkZW11eD1uZXcgaCx0aGlzLm1vZHVsZT12b2lkIDAsdGhpcy5sb2FkZWQ9dm9pZCAwLHRoaXMuZWZmZWN0VGFnPUUuVU5LTk9XTix0aGlzLndhdGNoZWRUeXBlPXt9LHRoaXMuZG93bmxvYWRCeXRlcz0wLHRoaXMuZnJhbWVzQnVmZmVyTElNVD0wLHRoaXMuX29uZXJyb3I9bnVsbCx0aGlzLm9uVmlkZW9GcmFtZURlY29kZT12b2lkIDAsdGhpcy5kb3dubG9hZFF1ZXVlPW5ldyBtKDEwMCwiZGVjb2RlIGRvd25sb2FkIHF1ZXVlIiksdGhpcy5wZW5kaW5nRnJhbWVzPTAsdGhpcy52aWRlb1F1ZXVlPVtdLHRoaXMuYXVkaW9RdWV1ZT1bXSx0aGlzLmNvbW1pdEZyYW1lcz0wLHRoaXMuTElNSVRGUkFNRVM9MTVlMyx0aGlzLldBU01MSU1JVD02ZTMsdGhpcy5wcm9ic2l6ZT0yNjIxNDQsdGhpcy5sb3NzRnJhbWVzPTAsdGhpcy5vbkRvd25sb2FkQnVmZmVyPWU9Pnt0aGlzLmRvd25sb2FkQnl0ZXMrPWUuYnl0ZUxlbmd0aCx0aGlzLnBzZGVtdXgucGFyc2UoZSksdGhpcy5wc2RlbXV4LnN0cmVhbXMuZm9yRWFjaChlPT57dGhpcy5hZGRQZW5kaW5nRnJhbWVzKGUucHRzLGUuaWQpfSksdGhpcy5zZW5kQnVmZmVyKGUpLHRoaXMub25GcmFtZVJlY2VpdmUoKX0sdGhpcy5vbkZyYW1lUmVjZWl2ZT0oKT0+e350aGlzLmVmZmVjdFRhZyZFLlBSRVBBUkUmJnRoaXMuZG93bmxvYWRCeXRlcz49dGhpcy5wcm9ic2l6ZSYmKHRoaXMuZWZmZWN0VGFnJj1+RS5SRUNFSVZFU1BTLHRoaXMuZWZmZWN0VGFnfD1FLlBSRVBBUkUsdGhpcy5vcGVuRGVjb2RlcigpLHRoaXMuZWZmZWN0VGFnfD1FLkRFQ09ERSl9LHRoaXMuZGVjb2RlTG9vcD0oKT0+e3RoaXMuZWZmZWN0VGFnJkUuUEFVU0V8fCh0aGlzLnBlbmRpbmdGcmFtZXM+MD90aGlzLmRlY29kZU9uY2UoKTp0aGlzLmVmZmVjdFRhZyZFLkRPV05MQlVGRkVSfHx0aGlzLmVmZmVjdFRhZyZFLkRPV05MT0FERE9XTiYmKHRoaXMuZWZmZWN0VGFnfD1FLkRPTkUpLHNldFRpbWVvdXQodGhpcy5kZWNvZGVMb29wLDUpKX0sdGhpcy53YWl0QnVmZmVyRGVjb2RlPSgpPT57aWYoKHRoaXMuZWZmZWN0VGFnJkUuRE9XTkxCVUZGRVIpIT09RS5ET1dOTEJVRkZFUilyZXR1cm47Y29uc3QgZT10aGlzLmRvd25sb2FkUXVldWUuZGVxdWV1ZSgpO3JlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLndhaXRCdWZmZXJEZWNvZGUpLGUmJih0aGlzLnBlbmRpbmdGcmFtZXM+MTB8fCh0aGlzLm1vZHVsZS5zZW5kUGFja2V0KGUuZ2V0QnVmZmVyKCkpLHRoaXMuZGVjb2RlT25jZSgpKSl9LHRoaXMucHJvcHM9ZSx0aGlzLmxvYWQoKX1sb2FkKCl7RC53YXJuKHRoaXMuZWZmZWN0VGFnJkUuTE9BRCwiZGVjb2RlciBoYXMgYmUgbG9hZGVkIil8fChELmRlYnVnKCJzdGFydCB0byBpbml0IGRlY29kZXIiKSx0aGlzLm1vZHVsZT1uZXcgcCx0aGlzLm1vZHVsZS5pbml0RGVjb2RlcigpKX1vcGVuRGVjb2Rlcigpe2NvbnN0IGU9dGhpcy5tb2R1bGUub3BlbkRlY29kZXIodGhpcy5wcm9ic2l6ZSk7cmV0dXJuIHRoaXMucHJvcHMuc2VuZE1lc3NhZ2UoYy5PUEVOLGUpLGV9c3RhcnREZWNvZGluZygpe3RoaXMuZWZmZWN0VGFnJkUuREVDT0RJTkd8fHRoaXMuZWZmZWN0VGFnJkUuREVDT0RFJiYoRC5kZWJ1Zygic3RhcnQgbG9vcCBkZWNvZGUiKSx0aGlzLmVmZmVjdFRhZ3w9RS5ERUNPRElORyx0aGlzLmVmZmVjdFRhZyY9fkUuUEFVU0UsdGhpcy5kZWNvZGVMb29wKCkpfWRlY29kZU9uY2UoKXtpZih0aGlzLmVmZmVjdFRhZyZFLkRFQ09ERSl7Y29uc3QgZT10aGlzLm1vZHVsZS5kZW9jZGUoKTtpZih0aGlzLnNldFBlbmRpbmdGcmFtZXMoITEpLCFlKXJldHVybiB0aGlzLnZpZGVvUXVldWUuc2hpZnQoKSx2b2lkIHRoaXMucHJvcHMuc2VuZE1lc3NhZ2UoYy5GQUlMRUQse3BlbmRpbmc6dGhpcy5wZW5kaW5nRnJhbWVzfSk7Y29uc3R7dHlwZTp0LGJ1ZmZlcjpzLHB0czppLGRlY29kZVRpbWU6cn09ZTsidmlkZW8iPT09dD8odGhpcy52aWRlb1F1ZXVlLnNoaWZ0KCksdGhpcy5wcm9wcy5zZW5kTWVzc2FnZShjLlZJREVPLHtwZW5kaW5nOnRoaXMucGVuZGluZ0ZyYW1lcyxkZWNvZGVUaW1lOnIscHRzOmksc3RyZWFtOnR9LHMpKToodGhpcy5hdWRpb1F1ZXVlLnNoaWZ0KCksdGhpcy5wcm9wcy5zZW5kTWVzc2FnZShjLkFVRElPLHtwZW5kaW5nOnRoaXMucGVuZGluZ0ZyYW1lcyxkZWNvZGVUaW1lOnIscHRzOmksc3RyZWFtOnR9LHMpKX19c3RvcERlY29kaW5nKCl7RC5kZWJ1Zygic3RvcCBsb29wIGRlY29kZSIpLHRoaXMuZWZmZWN0VGFnfD1FLlBBVVNFLHRoaXMuZWZmZWN0VGFnJj1+RS5ERUNPRElOR31zZWVrRGVjb2RpbmcoKXt9Zmx1c2hCdWZmZXJzKCl7dGhpcy5wZW5kaW5nRnJhbWVzPTAsdGhpcy52aWRlb1F1ZXVlPVtdLHRoaXMuYXVkaW9RdWV1ZT1bXSx0aGlzLm1vZHVsZS5mbHVzaEJ1ZmZlcnMoKX1zZXRQZW5kaW5nRnJhbWVzKGUpe2lmKGU/dGhpcy5wZW5kaW5nRnJhbWVzKys6dGhpcy5wZW5kaW5nRnJhbWVzLS0sdGhpcy5wZW5kaW5nRnJhbWVzPj10aGlzLkxJTUlURlJBTUVTP3RoaXMuZWZmZWN0VGFnfD1FLkJVRkZFUkZVTEw6dGhpcy5wZW5kaW5nRnJhbWVzPj10aGlzLldBU01MSU1JVD9FLkRPV05MQlVGRkVSJn50aGlzLmVmZmVjdFRhZyYmKHRoaXMuZWZmZWN0VGFnfD1FLkRPV05MQlVGRkVSfEUuV0FTTUJVRkZFUkZVTEwsdGhpcy53YWl0QnVmZmVyRGVjb2RlKCkpOih0aGlzLmVmZmVjdFRhZyZFLkJVRkZFUkZVTEx8fHRoaXMuZWZmZWN0VGFnJkUuV0FTTUJVRkZFUkZVTEwpJiYodGhpcy5lZmZlY3RUYWcmPX4oRS5XQVNNQlVGRkVSRlVMTHxFLkJVRkZFUkZVTEwpKSx0aGlzLnBlbmRpbmdGcmFtZXM+NTAwKXtjb25zdCBlPXRoaXMudmlkZW9RdWV1ZVt0aGlzLnZpZGVvUXVldWUubGVuZ3RoLTFdLnB0czt0aGlzLmZsdXNoQnVmZmVycygpLHRoaXMucHJvcHMuc2VuZE1lc3NhZ2UoYy5MT1NULHtwdHM6ZX0pfX1hZGRQZW5kaW5nRnJhbWVzKGUsdCl7ZSYmKDE5Mj09PXQ/dGhpcy5hdWRpb1F1ZXVlLnB1c2goe3B0czplfSk6dGhpcy52aWRlb1F1ZXVlLnB1c2goe3B0czplfSkpLHRoaXMuc2V0UGVuZGluZ0ZyYW1lcyghMCl9c2VuZEJ1ZmZlcihlKXt0aGlzLm1vZHVsZS5zZW5kUGFja2V0KGUpfWRlc3RvcnkoKXt0aGlzLnN0b3BEZWNvZGluZygpLHRoaXMubW9kdWxlLmRlc3RvcnlEZWNvZGVyKCl9aXNEb25lKCl7cmV0dXJuISEodGhpcy5lZmZlY3RUYWcmRS5ET05FKX19Y29uc3QgYj1uZXcgaSgid2Vid29ya2VyIik7bGV0IFQ7Y29uc3R7b3JpZ2luOk99PWdsb2JhbFRoaXMubG9jYXRpb24sTD1gJHtPfS9iY2xpZW50L2NvbW1vbnJlc291cmNlL29jeC5qc2AsUj1gJHtPfS9iY2xpZW50L2NvbW1vbnJlc291cmNlL29jeC53YXNtYDtsZXQgQTtmdW5jdGlvbiBVKCl7QT1uZXcgRih7c2VuZE1lc3NhZ2U6TX0pLE0oYy5MT0FEKX1vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7bGV0IHQ9bnVsbCxzPW51bGw7c3dpdGNoKGUuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyPyh0PXUuUkVDRUlWRSxzPWUuZGF0YSk6KHQ9ZS5kYXRhLnR5cGUscz1lLmRhdGEpLHQpe2Nhc2UgdS5JTklUOmlmKHNlbGYuTW9kdWxlKXJldHVybiB2b2lkIFUoKTtzZWxmLk1vZHVsZT17bm9Jbml0aWFsUnVuOiEwLG9uUnVudGltZUluaXRpYWxpemVkKCl7VSgpfSxsb2NhdGVGaWxlOihlLHQpPT5gJHtPfS9iY2xpZW50L2NvbW1vbnJlc291cmNlLyR7ZX1gLG1haW5TY3JpcHRVcmxPckJsb2I6TCxhc3luYyBpbnN0YW50aWF0ZVdhc20oZSx0KXtpZihUKXtyZXR1cm4gdm9pZCB0KGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKFQsZSksVCl9bGV0IHM7e2NvbnN0IHQ9bmV3IFhNTEh0dHBSZXF1ZXN0O3Qub3BlbigiR0VUIixSLCExKSx0LnJlc3BvbnNlVHlwZT0iYXJyYXlidWZmZXIiLHQuc2VuZChudWxsKTtjb25zdCBpPW5ldyBVaW50OEFycmF5KHQucmVzcG9uc2UpO3M9YXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoaSxlKX1NKGMuTU9EVUxFLHttb2R1bGU6VH0pLHQocy5pbnN0YW5jZSxzLm1vZHVsZSl9fSxpbXBvcnRTY3JpcHRzKEwpO2JyZWFrO2Nhc2UgdS5NT0RVTEU6VD1zLm1vZHVsZTticmVhaztjYXNlIHUuU1RBUlQ6QS5zdGFydERlY29kaW5nKCk7YnJlYWs7Y2FzZSB1LlNUT1A6QS5zdG9wRGVjb2RpbmcoKTticmVhaztjYXNlIHUuREVDT0RFOmJyZWFrO2Nhc2UgdS5SRUNFSVZFOkEub25Eb3dubG9hZEJ1ZmZlcihzKTticmVhaztjYXNlIHUuRkxVU0g6QS5mbHVzaEJ1ZmZlcnMoKTticmVhaztjYXNlIHUuREVTVE9SWTpBJiZBLmRlc3RvcnkoKSxBPW51bGw7YnJlYWs7ZGVmYXVsdDpiLmVycm9yKCEwLGBubyB0eXBlICR7dH1gKX19O2NvbnN0IE09KGUsdCxzKT0+e3M/cG9zdE1lc3NhZ2Uoe3R5cGU6ZSwuLi50LGJ1ZmZlcjpzfSxbcy5idWZmZXJdKTpwb3N0TWVzc2FnZSh7dHlwZTplLC4uLnR9KX07Cgo=",null,!1),k=new u("DecoderManager"),T=window.navigator.hardwareConcurrency;let U,M=0,E=!0;const C=[];function N(e){if(e.postMessage({type:R.INIT}),"status"in e)return e;const[t,n]=p();return U&&e.postMessage(U),e.onmessage=n=>{const{type:s}=n.data;s===Z.LOAD?t[0](e):s===Z.MODULE&&(U=n.data)},n}async function I(){if(!E&&!U)for(;await new Promise(e=>setTimeout(e,1e3)),!U;);return E=!1,C.length>0?N(C.pop()):N(new S())}const F={create:function(e){return k.warn(M>=T,`当前总播放数${M}, 推荐播放数${T}`),new w(e,I)},destory:function e(t){if(!t)return;M--;const n=t.decodeWorker;if(t.statusUtil.hasStatus(L.OPEN))n.postMessage({type:R.DESTORY}),C.push(n);else{if(!t.statusUtil.hasStatus(L.LOAD))return void setTimeout(()=>{e(t)},1e3);n.status="load",C.push(n)}t=null}};var A;!function(e){e[e.INIT=1]="INIT",e[e.START=2]="START",e[e.PAUSE=4]="PAUSE",e[e.RESUME=8]="RESUME",e[e.COMPLETE=16]="COMPLETE"}(A||(A={}));class z{constructor(e){this.options=void 0,this.log=void 0,this.currentTime=void 0,this.currentCacheDuration=void 0,this.status=void 0,this.statusUtil=o(this),this.checktime=void 0,this.options=e,this.log=new u(e.unit)}checkstatus(){const{minimum:e,maximum:t,getValue:n,isDone:s}=this.options;if(s())return void this.complete();const i=n();i>t?this.pause():i<e&&this.resume()}checkloop(){this.checktime=window.setTimeout(()=>{this.checkloop(),this.checkstatus()},1e3)}startCheck(){this.statusUtil.hasStatus(A.START)||(this.statusUtil.setStatus(A.START),this.checkstatus(),this.checkloop())}cancelCheck(){this.statusUtil.setStatus(A.INIT),clearTimeout(this.checktime)}pause(){this.statusUtil.hasStatus(A.PAUSE)||(this.statusUtil.replaceStatus(A.RESUME,A.PAUSE),this.options.pause())}resume(){this.statusUtil.hasStatus(A.RESUME)||(this.statusUtil.replaceStatus(A.PAUSE,A.RESUME),this.options.resume())}complete(){this.statusUtil.contactStatus(A.PAUSE),this.statusUtil.contactStatus(A.RESUME),this.statusUtil.contactStatus(A.COMPLETE),this.cancelCheck()}}const Y="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),H=Y&&"function"==typeof module.require?module.require:null;const J=function(e,t=null,n=!1){const s=Y?function(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}(e,n):function(e,t){const n=atob(e);if(t){const e=new Uint8Array(n.length);return Array.prototype.forEach.call(e,(e,t,s)=>{s[t]=n.charCodeAt(t)}),String.fromCharCode.apply(null,new Uint16Array(e.buffer))}return n}(e,n),i=s.indexOf("\n",10)+1,r=s.substring(i)+(t?`//# sourceMappingURL=${t}`:"");if(H){const e=H("worker_threads").Worker;return function(t){return new e(r,Object.assign({},t,{eval:!0}))}}const o=new Blob([r],{type:"application/javascript"}),a=URL.createObjectURL(o);return function(e){return new Worker(a,e)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwpsZXQgZT0wO2NvbnN0IHQ9WyIjZDY0ZTRlIiwiI2JhZGE1NSIsIiM3ZWM2OTkiXTtjb25zdCByPW5ldyBNYXA7Y2xhc3MgaXtjb25zdHJ1Y3RvcihpKXt0aGlzLm5hbWU9dm9pZCAwLHRoaXMuY29sb3I9dm9pZCAwLHIuc2V0KGksITApLHRoaXMubmFtZT1pLHRoaXMuY29sb3I9YFxuICAgIGNvbG9yOiAke3RbZV19O1xuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgd2lkdGg6IDEwMHB4O1xuICBgLGUrK31sb2coZSwuLi50KXtjb25zb2xlW2VdKGAlYyR7dGhpcy5uYW1lfTpgLHRoaXMuY29sb3IsLi4udCl9aW5mbyhlLC4uLnQpe2UmJnRoaXMubG9nKCJsb2ciLC4uLnQpfWdyb3VwKC4uLmUpe31ncm91cEVuZCguLi5lKXt9ZGVidWcoLi4uZSl7fXdhcm4oZSx0LC4uLnIpe3JldHVybiBlJiZjb25zb2xlLmxvZyhgJWMke3RoaXMubmFtZX06YCx0aGlzLmNvbG9yLHQsLi4uciksZX1lcnJvcihlLC4uLnQpe3JldHVybiBlJiZ0aGlzLmxvZygiZXJyb3IiLC4uLnQpLGV9fWkubGV2ZWw9MTtjb25zdCBzPW5ldyBpKCJ3ZWJnbCIpO2NsYXNzIGF7Y29uc3RydWN0b3IoZSx0LHIsaSl7dGhpcy5nbD12b2lkIDAsdGhpcy50ZXh0dXJlPXZvaWQgMCx0aGlzLmZpbGw9KGUsdCxyKT0+e2NvbnN0IGk9dGhpcy5nbDtpLmJpbmRUZXh0dXJlKGkuVEVYVFVSRV8yRCx0aGlzLnRleHR1cmUpLGkudGV4SW1hZ2UyRChpLlRFWFRVUkVfMkQsMCxpLkxVTUlOQU5DRSxlLHQsMCxpLkxVTUlOQU5DRSxpLlVOU0lHTkVEX0JZVEUscil9LHRoaXMuZ2w9ZSxlLmFjdGl2ZVRleHR1cmUoW2UuVEVYVFVSRTAsZS5URVhUVVJFMSxlLlRFWFRVUkUyXVtpXSksdGhpcy50ZXh0dXJlPWUuY3JlYXRlVGV4dHVyZSgpLGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELHRoaXMudGV4dHVyZSksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfV1JBUF9TLGUuQ0xBTVBfVE9fRURHRSksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfV1JBUF9ULGUuQ0xBTVBfVE9fRURHRSksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfTUlOX0ZJTFRFUixlLkxJTkVBUiksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfTUFHX0ZJTFRFUixlLkxJTkVBUiksZS51bmlmb3JtMWkoZS5nZXRVbmlmb3JtTG9jYXRpb24odCxyKSxpKX19Y2xhc3Mgb3tjb25zdHJ1Y3RvcihlKXt0aGlzLmNhbnZhcz12b2lkIDAsdGhpcy5nbD12b2lkIDAsdGhpcy55PXZvaWQgMCx0aGlzLnU9dm9pZCAwLHRoaXMudj12b2lkIDAsdGhpcy5zdG9wUmVuZGVyPSExLHRoaXMuY2FudmFzPWUsdGhpcy5nbD1lLmdldENvbnRleHQoIndlYmdsMiIse3ByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMH0pLHRoaXMuaW5pdCgpfWluaXQoKXtjb25zdCBlPXRoaXMuZ2w7aWYocy53YXJuKCFlLCJnbCBub3Qgc3VwcG9ydO+8gSIpKXJldHVybjtlLnBpeGVsU3RvcmVpKGUuVU5QQUNLX0FMSUdOTUVOVCw0KTtjb25zdCB0PXRoaXMuY29tcGlsZVNoYWRlcigiXG4gICAgICBhdHRyaWJ1dGUgbG93cCB2ZWM0IGFfdmVydGV4UG9zaXRpb247XG4gICAgICBhdHRyaWJ1dGUgdmVjMiBhX3RleHR1cmVQb3NpdGlvbjtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICBnbF9Qb3NpdGlvbiA9IGFfdmVydGV4UG9zaXRpb247XG4gICAgICAgIHZfdGV4Q29vcmQgPSBhX3RleHR1cmVQb3NpdGlvbjtcbiAgICAgIH1cbiAgICAiLGUuVkVSVEVYX1NIQURFUikscj10aGlzLmNvbXBpbGVTaGFkZXIoIlxuICAgICAgcHJlY2lzaW9uIGxvd3AgZmxvYXQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyWTtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHNhbXBsZXJVO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgc2FtcGxlclY7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgZmxvYXQgcixnLGIseSx1LHYsZlltdWw7XG4gICAgICAgIHkgPSB0ZXh0dXJlMkQoc2FtcGxlclksIHZfdGV4Q29vcmQpLnI7XG4gICAgICAgIHUgPSB0ZXh0dXJlMkQoc2FtcGxlclUsIHZfdGV4Q29vcmQpLnI7XG4gICAgICAgIHYgPSB0ZXh0dXJlMkQoc2FtcGxlclYsIHZfdGV4Q29vcmQpLnI7XG5cbiAgICAgICAgZlltdWwgPSB5ICogMS4xNjQzODI4MTI1O1xuICAgICAgICByID0gZlltdWwgKyAxLjU5NjAyNzM0Mzc1ICogdiAtIDAuODcwNzg3NTk4O1xuICAgICAgICBnID0gZlltdWwgLSAwLjM5MTc2MTcxODc1ICogdSAtIDAuODEyOTY4NzUgKiB2ICsgMC41Mjk1OTM3NTtcbiAgICAgICAgYiA9IGZZbXVsICsgMi4wMTcyMzA0Njg3NSAqIHUgLSAxLjA4MTM4OTE2MDM3NTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChyLCBnLCBiLCAxLjApO1xuICAgICAgfSIsZS5GUkFHTUVOVF9TSEFERVIpLGk9dGhpcy5jcmVhdGVQcm9ncmFtKHQscik7dGhpcy5pbml0VmVydGV4QnVmZmVycyhpKSx0aGlzLnk9bmV3IGEoZSxpLCJzYW1wbGVyWSIsMCksdGhpcy51PW5ldyBhKGUsaSwic2FtcGxlclUiLDEpLHRoaXMudj1uZXcgYShlLGksInNhbXBsZXJWIiwyKX1jb21waWxlU2hhZGVyKGUsdCl7Y29uc3Qgcj10aGlzLmdsLmNyZWF0ZVNoYWRlcih0KTtpZih0aGlzLmdsLnNoYWRlclNvdXJjZShyLGUpLHRoaXMuZ2wuY29tcGlsZVNoYWRlcihyKSwhdGhpcy5nbC5nZXRTaGFkZXJQYXJhbWV0ZXIocix0aGlzLmdsLkNPTVBJTEVfU1RBVFVTKSl7Y29uc3QgZT10aGlzLmdsLmdldFNoYWRlckluZm9Mb2cocik7dGhpcy5nbC5kZWxldGVTaGFkZXIocikscy5lcnJvcighMCwiY291bGQgbm90IGNvbXBpbGUgc2hhZGVyIixlKX1yZXR1cm4gcn1jcmVhdGVQcm9ncmFtKGUsdCl7Y29uc3Qgcj10aGlzLmdsLGk9ci5jcmVhdGVQcm9ncmFtKCk7ci5hdHRhY2hTaGFkZXIoaSxlKSxyLmF0dGFjaFNoYWRlcihpLHQpLHIubGlua1Byb2dyYW0oaSksci51c2VQcm9ncmFtKGkpO2NvbnN0IGE9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGksdGhpcy5nbC5MSU5LX1NUQVRVUyk7cmV0dXJuIHMuZXJyb3IoIWEsInByb2dyYW0gZmFpbCB0byBsaW5rIityLmdldFNoYWRlckluZm9Mb2codCkpLGl9aW5pdFZlcnRleEJ1ZmZlcnMoZSl7Y29uc3QgdD10aGlzLmdsLHI9dC5jcmVhdGVCdWZmZXIoKSxpPW5ldyBGbG9hdDMyQXJyYXkoWzEsMSwwLC0xLDEsMCwxLC0xLDAsLTEsLTEsMF0pO3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixyKSx0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsaSx0LlNUQVRJQ19EUkFXKTtjb25zdCBzPXQuZ2V0QXR0cmliTG9jYXRpb24oZSwiYV92ZXJ0ZXhQb3NpdGlvbiIpO3QudmVydGV4QXR0cmliUG9pbnRlcihzLDMsdC5GTE9BVCwhMSwwLDApLHQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocyk7Y29uc3QgYT1uZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDEsMSwwLDFdKSxvPXQuY3JlYXRlQnVmZmVyKCk7dC5iaW5kQnVmZmVyKHQuQVJSQVlfQlVGRkVSLG8pLHQuYnVmZmVyRGF0YSh0LkFSUkFZX0JVRkZFUixhLHQuU1RBVElDX0RSQVcpO2NvbnN0IG49dC5nZXRBdHRyaWJMb2NhdGlvbihlLCJhX3RleHR1cmVQb3NpdGlvbiIpO3QudmVydGV4QXR0cmliUG9pbnRlcihuLDIsdC5GTE9BVCwhMSwwLDApLHQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobil9cmVuZGVyRnJhbWUoZSx0LHIpe2lmKHRoaXMuc3RvcFJlbmRlcilyZXR1cm47Y29uc3QgaT10aGlzLmdsO2kudmlld3BvcnQoMCwwLGkuY2FudmFzLndpZHRoLGkuY2FudmFzLmhlaWdodCksaS5jbGVhckNvbG9yKDAsMCwwLDApLGkuY2xlYXIoaS5DT0xPUl9CVUZGRVJfQklUKTtjb25zdCBzPWUqdCxhPWU+PjEsbz10Pj4xLG49YSpvO3RoaXMueS5maWxsKGUsdCxyLnN1YmFycmF5KDAscykpLHRoaXMudS5maWxsKGEsbyxyLnN1YmFycmF5KHMscytuKSksdGhpcy52LmZpbGwoYSxvLHIuc3ViYXJyYXkocytuLHIubGVuZ3RoKSksaS5kcmF3QXJyYXlzKGkuVFJJQU5HTEVfU1RSSVAsMCw0KX1yZXNpemUoZSx0KXt0aGlzLnN0b3BSZW5kZXI9ITAsZSYmKHRoaXMuY2FudmFzLndpZHRoPWUpLHQmJih0aGlzLmNhbnZhcy5oZWlnaHQ9dCksc2V0VGltZW91dCgoKT0+e3RoaXMuc3RvcFJlbmRlcj0hMX0sMTAwKX1kZXN0cm95KCl7Y29uc3QgZT10aGlzLmdsO3RoaXMuZ2wuY2xlYXIoZS5DT0xPUl9CVUZGRVJfQklUfGUuREVQVEhfQlVGRkVSX0JJVHxlLlNURU5DSUxfQlVGRkVSX0JJVCl9fWxldCBuOyFmdW5jdGlvbihlKXtlW2UuQ0FOVkFTPTBdPSJDQU5WQVMiLGVbZS5JTklUPTFdPSJJTklUIixlW2UuUExBWT0yXT0iUExBWSIsZVtlLkRFU1RPUlk9M109IkRFU1RPUlkiLGVbZS5TSVpFPTRdPSJTSVpFIixlW2UuU1RBUlQ9NV09IlNUQVJUIixlW2UuUEFVU0U9Nl09IlBBVVNFIn0obnx8KG49e30pKTtsZXQgaD1udWxsLGw9bnVsbDtjb25zdCB1PW5ldyBjbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmxhc3Q9MCx0aGlzLmZyYW1lPXZvaWQgMCx0aGlzLnRpbWU9MCx0aGlzLnF1ZXVlPVtdLHRoaXMuZnJhbWVUaW1lPXZvaWQgMCx0aGlzLmN1cnJlbnQ9MCx0aGlzLm1heE51bT0wLHRoaXMubG9nPXZvaWQgMCx0aGlzLmNhbGN1bGF0ZT0oKT0+e2NvbnN0IGU9RGF0ZS5ub3coKSx0PU1hdGgucm91bmQoMWUzKnRoaXMuZnJhbWUvKGUtdGhpcy5sYXN0KSk7dGhpcy5sYXN0PWUsdGhpcy5mcmFtZT0wLHRoaXMuY3VycmVudD10LHRoaXMubG9nLmRlYnVnKHQpfSx0aGlzLnJlbmRlckxvb3A9KCk9Pnt0aGlzLnF1ZXVlLmxlbmd0aCYmdGhpcy5yZW5kZXJGcmFtZSh0aGlzLnF1ZXVlLnNoaWZ0KCkpLHRoaXMuZnJhbWVUaW1lPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlckxvb3ApfSx0aGlzLnN0YXJ0PSgpPT57dGhpcy5mcmFtZT0wLGNsZWFyVGltZW91dCh0aGlzLnRpbWUpLHRoaXMubWF4TnVtJiZ0aGlzLnJlbmRlckxvb3AoKSx0aGlzLnRpbWU9c2VsZi5zZXRJbnRlcnZhbCh0aGlzLmNhbGN1bGF0ZSwxZTMpfSx0aGlzLnBhc3VlPSgpPT57Y2xlYXJUaW1lb3V0KHRoaXMudGltZSksdGhpcy5tYXhOdW0mJmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWVUaW1lKX0sdGhpcy5jbGVhcj0oKT0+e3RoaXMucGFzdWUoKSx0aGlzLnF1ZXVlPVtdfSx0aGlzLnJlcXVlc3RGcmFtZT1lPT57dGhpcy5tYXhOdW0/KHRoaXMucXVldWUubGVuZ3RoPnRoaXMubWF4TnVtJiYodGhpcy5xdWV1ZT1bXSksdGhpcy5xdWV1ZS5wdXNoKGUpKToodGhpcy5mcmFtZSsrLHJlcXVlc3RBbmltYXRpb25GcmFtZShlKSl9LHRoaXMucmVuZGVyRnJhbWU9ZT0+e3RoaXMuZnJhbWUrKyxlKCl9LHRoaXMubG9nPW5ldyBpKGUpfX0oIndlYmdsIGNvbW1pdCBmcHMiKTt1Lm1heE51bT0xLG9ubWVzc2FnZT1mdW5jdGlvbihlKXtjb25zdCB0PWUuZGF0YTtzd2l0Y2godC50eXBlKXtjYXNlIG4uQ0FOVkFTOmw9dC5jYW52YXM7Y2FzZSBuLklOSVQ6aD1uZXcgbyhsKTticmVhaztjYXNlIG4uUExBWTp1LnJlcXVlc3RGcmFtZSgoKT0+e2NvbnN0e3dpZHRoOmUsaGVpZ2h0OnIsYnVmZmVyOml9PXQ7aC5yZW5kZXJGcmFtZShlLHIsaSl9KTticmVhaztjYXNlIG4uU1RBUlQ6dS5zdGFydCgpO2JyZWFrO2Nhc2Ugbi5QQVVTRTp1LnBhc3VlKCk7YnJlYWs7Y2FzZSBuLlNJWkU6aC5yZXNpemUodC53aWR0aCx0LmhlaWdodCk7YnJlYWs7Y2FzZSBuLkRFU1RPUlk6aC5kZXN0cm95KCksdS5jbGVhcigpLGg9bnVsbH19OwoK",null,!1);let _;!function(e){e[e.CANVAS=0]="CANVAS",e[e.INIT=1]="INIT",e[e.PLAY=2]="PLAY",e[e.DESTORY=3]="DESTORY",e[e.SIZE=4]="SIZE",e[e.START=5]="START",e[e.PAUSE=6]="PAUSE"}(_||(_={}));const D=[];const P=new WeakMap();class B{constructor(e){if(this.canvas=void 0,this.webglWorker=void 0,this.current=void 0,this.sendMessage=(e,t,n)=>{n?this.webglWorker.postMessage({type:e,...t},[n]):this.webglWorker.postMessage({type:e,...t})},this.fullscreen=()=>{const e=this.canvas;e.requestFullscreen&&e.requestFullscreen()},this.exitfullscreen=()=>{document.exitFullscreen&&document.exitFullscreen()},this.canvas=e,this.webglWorker=D.length?D.pop():new J(),P.has(e))this.sendMessage(_.INIT);else{!function(e,t){let n=0,s=t.width,i=t.height;const r=()=>e.postMessage({type:_.SIZE,width:s,height:i});Object.defineProperties(t,{width:{get:()=>s,set:e=>{s=e,clearTimeout(n),n=window.setTimeout(r,100)}},height:{get:()=>i,set:e=>{i=e,clearTimeout(n),n=window.setTimeout(r,100)}}})}(this.webglWorker,e);const t=e.transferControlToOffscreen();this.sendMessage(_.CANVAS,{canvas:t},t),P.set(e,!0)}}renderFrame(e,t,n){this.sendMessage(_.PLAY,{width:e,height:t,buffer:n},n.buffer)}start(){this.sendMessage(_.START)}pause(){this.sendMessage(_.PAUSE)}destory(){this.sendMessage(_.DESTORY),D.push(this.webglWorker)}}const Q=new Set();function K(){document.removeEventListener("click",K),document.removeEventListener("keydown",K),Q.forEach(e=>e()),Q.clear()}document.addEventListener("click",K),document.addEventListener("keydown",K);class O{constructor(e){this.props=void 0,this.audioCtx=void 0,this.gainNode=void 0,this.bufferSource=void 0,this.duration=0,this.paused=!0,this.hasAudio=!1,this.buffers=[],this.currentPTS=0,this.acutalTime=0,this.nextTime=0,this.audioCtx=new(window.AudioContext||window.webkitAudioContext)(),this.gainNode=this.audioCtx.createGain(),this.setOptions(e),"running"!==this.audioCtx.state&&Q.add(()=>this.audioCtx.resume())}setOptions(e){e&&(this.props={...this.props,...e},"volume"in e&&this.setVolume(e.volume))}setVolume(e){this.gainNode.gain.setValueAtTime(e,this.audioCtx.currentTime)}append(e){"running"===this.audioCtx.state&&(this.buffers.push(e),!this.paused&&this.nextTime<=this.audioCtx.currentTime&&this.flush())}play(){this.paused=!1,this.flush()}pause(){this.paused=!0,this.bufferSource&&this.bufferSource.stop(this.audioCtx.currentTime)}flush(){if(0===this.buffers.length)return void(this.hasAudio=!1);this.hasAudio=!0,this.currentPTS=this.buffers[0].pts;const e=this.getBuffer(this.buffers.map(e=>e.buffer));this.buffers=[],this.playBuffer(e)}getBuffer(e){if(!Array.isArray(e))return e;let t=0;e.forEach(e=>t+=e.length);const n=new Uint8Array(t);let s=0;return e.forEach(e=>{n.set(e,s),s+=e.length}),n}playBuffer(e){const t=this.audioCtx,{channels:n,sampleRate:s,sampleFmt:i}=this.props,r=i<<1,o=e.length/r/n,a=t.createBuffer(n,o,s);this.adjustBuffer(a,o,this.getTypeArray(e.buffer));const l=t.createBufferSource();return l.buffer=a,l.connect(this.gainNode),this.gainNode.connect(this.audioCtx.destination),this.nextTime<=t.currentTime?(this.nextTime=t.currentTime,this.acutalTime=this.nextTime):this.acutalTime=this.nextTime,l.start(this.nextTime),l.onended=()=>{this.acutalTime=this.nextTime,this.flush()},this.nextTime+=a.duration,this.bufferSource=l,a.duration}getTypeArray(e){switch(this.props.sampleFmt){case 1:const t=new Int16Array(e),n=32768;return e=>t[e]/n;case 2:const s=new Float32Array(e);return e=>s[e]}}adjustBuffer(e,t,n){const{channels:s}=this.props;for(let i=0;i<s;i++){const r=e.getChannelData(i);let o=i;for(let e=0;e<t;e++)r[e]=n(o),o+=s}}get currentTime(){return this.audioCtx.currentTime-this.acutalTime+this.currentPTS/1e3}}class j{constructor(e){this.last=0,this.frame=void 0,this.time=0,this.queue=[],this.frameTime=void 0,this.current=0,this.maxNum=0,this.log=void 0,this.calculate=()=>{const e=Date.now(),t=Math.round(1e3*this.frame/(e-this.last));this.last=e,this.frame=0,this.current=t,this.log.debug(t)},this.renderLoop=()=>{this.queue.length&&this.renderFrame(this.queue.shift()),this.frameTime=requestAnimationFrame(this.renderLoop)},this.start=()=>{this.frame=0,clearTimeout(this.time),this.maxNum&&this.renderLoop(),this.time=self.setInterval(this.calculate,1e3)},this.pasue=()=>{clearTimeout(this.time),this.maxNum&&cancelAnimationFrame(this.frameTime)},this.clear=()=>{this.pasue(),this.queue=[]},this.requestFrame=e=>{this.maxNum?(this.queue.length>this.maxNum&&(this.queue=[]),this.queue.push(e)):(this.frame++,requestAnimationFrame(e))},this.renderFrame=e=>{this.frame++,e()},this.log=new u(e)}}var $;!function(e){e[e.PROBESIZE=2048]="PROBESIZE",e[e.MAXDOWNLOADBUFFER=1e3]="MAXDOWNLOADBUFFER",e[e.MINDOWNLOADBUFFER=1e3]="MINDOWNLOADBUFFER"}($||($={}));class q extends V{static probe(){return!0}constructor(e){super(e,"WasmPlayer"),this.decodeBufctl=void 0,this.totalLength=0,this.bufferLimit=100,this.bufferNumber=0,this.webgl=void 0,this.audio=void 0,this.fps=new j("webgl pending fps"),this.decoder=void 0,this.avParams=void 0,this.baseVideoTime=0,this.baseAudioTime=0,this.fpsInterval=0,this.videoQueue=[],this.audioQueue=[],this.commonFrames=0,this.lostFrames=0,this.lostPacketFrames=0,this.lastFramesTime=[],this.avFrame=void 0,this.avDecodeTime=void 0,this.decodeTotalTime=0,this.decodeTotalFrame=0,this.onDownload=(e,t)=>this.decoder.onDownloadBuffer(e,t),this.onAVBuffer=e=>{"video"===e.stream?(this.videoQueue.push(e),e.pts=e.pts-this.baseVideoTime,this.endV=e.pts):(this.audio.append(e),e.pts=e.pts-this.baseAudioTime,this.endA=e.pts),this.lastFramesTime.push(e.decodeTime),this.lastFramesTime.length>30&&this.lastFramesTime.shift(),this.decodeTotalTime+=e.decodeTime,this.decodeTotalFrame+=1},this.onAVLost=({pts:e})=>{this._currentTime=e-this.baseVideoTime},this.renderFrame=e=>{const{width:t,height:n}=this.playParams;this.fps.renderFrame(()=>this.shouldRender&&this.webgl.renderFrame(t,n,e.buffer))},this.onLoop=(e,t)=>{this.videoQueue.length>100&&(this.videoQueue.splice(0,50),this._currentTime=this.videoQueue[0].pts,e=this._currentTime,this.lostFrames+=50);const n=1e3*this.audio.currentTime,s=this.audio.hasAudio?n:e;for(;this.videoQueue.length;){if(!(this.videoQueue[0].pts<=s))break;this.renderFrame(this.videoQueue.shift())}},this.createMediaElement()}createMediaElement(){const e=document.createElement("canvas");e.style.width="100%",e.style.height="100%",super.bindElement(e),this.webgl=new B(e)}async load(){try{if(super.load(),this.decoder=F.create({}),await this.decoder.load(),this.status===v.DISCARD)return;if(this.loadDownload(),this.decoder.onerror=this.onerror,this.decodeBufctl=new z({unit:"decode video number",minimum:25,maximum:75,getValue:()=>this.videoQueue.length,pause:()=>this.decoder.stopDecoding(),resume:()=>this.decoder.startDecoding(),isDone:()=>this.decoder.isDone(),destory:()=>this.decoder.destory()}),this.downBufctl.startCheck(),this.avParams=await this.decoder.getVideoParams(),this.status===v.DISCARD)return;const{width:e,height:t,rate:n}=this.avParams.video;this.playParams={width:e,height:t},this.fpsInterval=1e3/n,this.statusUtil.setStatus(v.LOAD),this.emit("loadedmetadata"),this.on("volumechange",()=>this.audio&&this.audio.setOptions({volume:this._volume}))}catch(e){}}async reload(){await super.reload(),this.baseVideoTime=null,this.baseAudioTime=null,this.decoder.flushBuffers(),this.videoQueue=[]}loadDownload(){const e=super.loadDownload();return this.downBufctl=new z({unit:"pending frame",minimum:100,maximum:200,getValue:()=>this.decoder.pendingFrames,pause:()=>this.download.pause(),resume:()=>this.download.resume(),isDone:()=>this.download.isDone(),destory:()=>this.download.destory()}),e}play(e=!0){return!!super.play(e)&&(this.statusUtil.hasStatus(v.LOADDATA)?(e&&this.emit("play"),this.downBufctl.startCheck(),this.normalPlay()):this.firstPlay(),this.audio=new O({...this.avParams.audio,volume:this._volume}),this.decodeBufctl.startCheck(),this.decoder.startDecoding(),!0)}firstPlay(){this.decoder.onAVFrame=e=>{this.baseVideoTime||"video"!==e.stream||(this.baseVideoTime=e.pts),this.baseAudioTime||"audio"!==e.stream||(this.baseAudioTime=e.pts),this.onAVBuffer(e),this.videoQueue.length<10||(this.emit("loadeddata"),this.statusUtil.contactStatus(v.LOADDATA),this.decoder.onAVFrame=this.onAVBuffer,this.normalPlay())},this.decoder.onAVLost=this.onAVLost}normalPlay(){this.commonFrames=0,this.audio.play(),this.fps.start(),this.webgl.start(),this._resetAnimate(),this._animate()}framePlay(){if(this.statusUtil.hasStatus(v.FPLAY)||(this.statusUtil.replaceStatus(v.PLAYING,v.PAUSE),this.decodeBufctl.startCheck(),this.downBufctl.startCheck()),this.videoQueue.length){const e=this.videoQueue.shift();super._currentTime=e.pts,this.renderFrame(e)}}pause(e=!0){return!!super.pause(e)&&(this.decodeBufctl.pause(),this.decodeBufctl.cancelCheck(),this.audio.pause(),this.fps.pasue(),this.webgl.pause(),!0)}destory(){super.destory(),this.decodeBufctl&&this.decodeBufctl.cancelCheck(),F.destory(this.decoder),this.decoder=null,this.videoQueue=[],this.webgl&&this.webgl.destory(),this.fps.clear()}set currentTime(e){this._currentTime=e,this.seek(),this.emit("timeupdate",e)}get currentTime(){return this._currentTime}get debugInfo(){const{decodeTotalFrame:e,decodeTotalTime:t,lastFramesTime:n,videoQueue:s}=this;let i=0;n.forEach(e=>i+=e);(t/e).toFixed(2);const r=(i/n.length).toFixed(2);return{"当前时间":this._currentTime/1e3,"下三帧时间":s.slice(0,3).map(e=>e.pts/1e3).join(", "),"队列长度":s.length,"丢帧数":this.lostFrames,"帧率":`${this.fps.current}fps`,"近30帧时间":`${r}ms`}}}function ee(e,t=0,n){(n||0!==t)&&(n=n||e.byteLength+1,e=e.slice(t,n));const s=new DataView(e);return{buffer:s,current:0,value:s.getUint32(0),bits:0,avaliabe:32,index:0}}function te(e,t){if(0===t)return 0;let n;if(e.avaliabe>=t)e.bits+=t,e.avaliabe=32-e.bits,n=e.value>>>e.avaliabe;else{e.current+=4,e.bits=t-e.avaliabe,e.avaliabe=32-e.bits;const s=e.buffer.getUint32(e.current);n=e.value<<e.bits|s>>>e.avaliabe,e.value=s}return 0===e.avaliabe?(e.current+=4,e.bits=0,e.avaliabe=32,e.value=e.buffer.getUint32(e.current)):e.value&=(1<<e.avaliabe)-1>>>0,e.index+=t,n}function ne(e){const t=e.value;if(e.current+=4,e.value=e.buffer.getUint32(e.current),32===e.avaliabe)return t;return t*2**e.bits+(t>>>e.avaliabe)}function se(e,t){const n=e.byteLength-4;for(;t.current<n;t.current++)if(1===e.getUint32(t.current))return t.current+=ie,t.current}const ie=4;class re{static getStream(e,t){const n=Object.create(new re(e));return t&&Object.keys(t).forEach(e=>{n[e]=t[e]}),n}constructor(e){this.start=0,this.end=0,this.extraRange=null,this._buffer=void 0,this._buffer=e}buffer(){if(this.extraRange){const e=this.end-this.start;let t=e;this.extraRange.forEach(e=>t+=e[2]);const n=new Uint8Array(t),s=[[this.start,this.end,e],...this.extraRange];let i=0;return s.forEach(e=>{const t=this._buffer.slice(e[0],e[1]);n.set(new Uint8Array(t),i),i+=e[2]}),n.buffer}return this._buffer.slice(this.start,this.end)}merge(e){this.extraRange||(this.extraRange=[]),this.extraRange.push([e.start,e.end,e.end-e.start])}}const oe={id:null,pid:null,container:void 0,inputTimeScale:0,sequenceNumber:0,timescale:null,duration:null,pixelRatio:null,samples:null};function ae(e){const{current:t,bits:n}=e;for(;0===te(e,1););const s=8*(e.current-t)+(e.bits-n)-1;return(1<<s|te(e,s))-1}function le(e){const t=ae(e);return 1&t?1+t>>>1:-1*(t>>>1)}const ce=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function ue(e,t){if(!te(e,1))return 0;let n=8,s=8;for(let i=0;i<t;i++){if(s){const t=le(e);if(t<-128||t>128)return 0;s=n+t&255}if(!i&&!s)break;n=s||n}return 0}function he(e){const t=te(e,8),n=te(e,6);!function(e,t){const n=e.bits+t;if(e.bits>32){const t=Math.floor(n/8);e.current+=t,e.bits=n-8*t}else e.bits=n;e.avaliabe=32-e.bits,e.value&=(1<<e.avaliabe)-1,e.index+=t}(e,2);const s=te(e,8),i={sps_id:ae(e),time_offset_length:24,profile_idc:t,constraint_set_flags:n,level_idc:s,full_range:-1,scaling_matrix_present:0,color_primaries:0,color_trc:null,colorspace:2,colour_description_present_flag:0,offset_for_ref_frame:[],mb_width:0,mb_height:0,sar:{num:0,den:0}};if(100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t||138===t||144===t){const t=ae(e);if(i.chroma_format_idc=t,t>3);else if(3===t){te(e,1)}ae(e),ae(e),te(e,1);!function(e,t){let n=0;te(e,1)&&(n|=ue(e,16),n|=ue(e,16),n|=ue(e,16),n|=ue(e,16),n|=ue(e,16),n|=ue(e,16),n|=ue(e,64),n|=ue(e,64),3===t.chroma_format_idc&&(n|=ue(e,64),n|=ue(e,64),n|=ue(e,64),n|=ue(e,64)))}(e,i)}ae(e);const r=ae(e);if(0===r){ae(e)}else if(1===r){te(e,1),ae(e),ae(e);const t=ae(e);for(let n=0;n<t;n++)i.offset_for_ref_frame[n]=ae(e)}ae(e),te(e,1);if(i.mb_width=ae(e)+1,i.mb_height=ae(e)+1,i.frame_mbs_only_flag=te(e,1),0===i.frame_mbs_only_flag){te(e,1)}i.mb_height*=2-i.frame_mbs_only_flag;te(e,1);if(te(e,1)){i.crop_left=ae(e),i.crop_right=ae(e),i.crop_top=ae(e),i.crop_bottom=ae(e);const t=1===i.chroma_format_idc?1:0,n=1<<(1===i.chroma_format_idc||2===i.chroma_format_idc?1:0),s=2-i.frame_mbs_only_flag<<t;i.crop_left=i.crop_left*n,i.crop_right=i.crop_right*n,i.crop_top=i.crop_top*s,i.crop_bottom=i.crop_bottom*s}else i.crop_left=0,i.crop_right=0,i.crop_top=0,i.crop_bottom=0;te(e,1)&&function(e,t){if(te(t,1)){const n=te(t,8);if(255===n)e.sar.num=te(t,16),e.sar.den=te(t,16);else if(n<ce.length){const t=ce[n];e.sar={num:t[0],den:t[1]}}}else e.sar.num=0,e.sar.den=0;if(te(t,1)&&te(t,1),te(t,1)&&(te(t,3),e.full_range=te(t,1),e.colour_description_present_flag=te(t,1),e.colour_description_present_flag&&(e.color_primaries=te(t,8),e.color_trc=te(t,8),e.colorspace=te(t,8))),te(t,1)){ae(t);ae(t)}if(e.timing_info_present_flag=te(t,1),e.timing_info_present_flag){const n=ne(t),s=ne(t);n&&s?(e.num_units_in_tick=n,e.time_scale=s):e.timing_info_present_flag=0,e.fixed_frame_rate_flag=te(t,1)}}(i,e),(0===i.sar.den||i.sar.num)&&(i.sar={den:1,num:1});let o=0;return i.time_scale&&(o=i.time_scale/i.num_units_in_tick,o=1===i.fixed_frame_rate_flag?o/2:o),{width:16*i.mb_width-(i.crop_right+i.crop_left),height:16*i.mb_height-(i.crop_top+i.crop_bottom),pixelRatio:i.sar,fps:o}}var de;function pe(e){let t="avc1.";return e.subarray(1,4).forEach(e=>{let n=e.toString(16);n.length<2&&(n=`0${n}`),t+=n}),t}!function(e){e[e.NAL_UNKNOWN=100]="NAL_UNKNOWN",e[e.NAL_SLICE=1]="NAL_SLICE",e[e.NAL_SLICE_DPA=2]="NAL_SLICE_DPA",e[e.NAL_SLICE_DPB=3]="NAL_SLICE_DPB",e[e.NAL_SLICE_DPC=4]="NAL_SLICE_DPC",e[e.NAL_SLICE_IDR=5]="NAL_SLICE_IDR",e[e.NAL_SEI=6]="NAL_SEI",e[e.NAL_SPS=7]="NAL_SPS",e[e.NAL_PPS=8]="NAL_PPS"}(de||(de={}));const me=Math.pow(2,32)-1,fe=new Uint8Array([0,0,0,0,0,0,0,0]),ye=new Uint8Array([105,115,111,109]),be=new Uint8Array([97,118,99,49]),ge=new Uint8Array([0,0,0,1]),ve=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ze={avc1:null,avcC:null,btrt:null,dinf:null,dref:null,esds:null,ftyp:null,hdlr:null,mdat:null,mdhd:null,mdia:null,mfhd:null,minf:null,moof:null,moov:null,mp4a:null,".mp3":null,mvex:null,mvhd:null,pasp:null,sdtp:null,stbl:null,stco:null,stsc:null,stsd:null,stsz:null,stts:null,tfdt:null,tfhd:null,traf:null,trak:null,trun:null,trex:null,tkhd:null,vmhd:null,smhd:null};Object.keys(Ze).forEach(e=>{Ze[e]=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])});class Ve{static box(e,...t){let n=8,s=t.length;for(;s--;)n+=t[s].byteLength;const i=new Uint8Array(n);i[0]=n>>24&255,i[1]=n>>16&255,i[2]=n>>8&255,i[3]=255&n,i.set(e,4);const r=t.length;for(s=0,n=8;s<r;s++)i.set(t[s],n),n+=t[s].byteLength;return i}static mdat(e){return Ve.box(Ve.types.mdat,e)}static trun(e,t){const n=e.samples||[],s=n.length,i=12+16*s,r=new Uint8Array(i);t+=8+i,r.set([0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(let e=0;e<s;e++){const{duration:t,size:s,flags:i,cts:o}=n[e];r.set([t>>>24&255,t>>>16&255,t>>>8&255,255&t,s>>>24&255,s>>>16&255,s>>>8&255,255&s,i.isLeading<<2|i.dependsOn,i.isDependedOn<<6|i.hasRedundancy<<4|i.paddingValue<<1|i.isNonSync,61440&i.degradPrio,15&i.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*e)}return Ve.box(Ve.types.trun,r)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);for(let e=0;e<t.length;e++){const s=t[e].flags;n[e+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy}return Ve.box(Ve.types.sdtp,n)}static traf(e,t){let n=Ve.sdtp(e),s=e.id,i=Math.floor(t/(me+1)),r=Math.floor(t%(me+1));return Ve.box(Ve.types.traf,Ve.box(Ve.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),Ve.box(Ve.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r])),Ve.trun(e,n.length+16+20+8+16+8+8),n)}static mfhd(e){return Ve.box(Ve.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static moof(e,t,n){return Ve.box(Ve.types.moof,Ve.mfhd(e),Ve.traf(n,t))}static avc1(e){let t=[],n=[];for(let n=0;n<e.sps.length;n++){const s=e.sps[n],i=s.byteLength;t.push(i>>>8&255),t.push(255&i),t=t.concat(Array.prototype.slice.call(s))}for(let t=0;t<e.pps.length;t++){const s=e.pps[t],i=s.byteLength;n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(s))}const s=Ve.box(Ve.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),i=e.width,r=e.height,o=e.pixelRatio[0],a=e.pixelRatio[1];return Ve.box(Ve.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,r>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,Ve.box(Ve.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ve.box(Ve.types.pasp,new Uint8Array([o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])))}static esds(e){let t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){let t=e.samplerate;return Ve.box(Ve.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),Ve.box(Ve.types.esds,Ve.esds(e)))}static mp3(e){let t=e.samplerate;return Ve.box(Ve.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}static stsd(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?Ve.box(Ve.types.stsd,Ve.STSD,Ve.mp4a(e)):Ve.box(Ve.types.stsd,Ve.STSD,Ve.mp3(e)):Ve.box(Ve.types.stsd,Ve.STSD,Ve.avc1(e))}static stbl(e){return Ve.box(Ve.types.stbl,Ve.stsd(e),Ve.box(Ve.types.stts,Ve.STTS),Ve.box(Ve.types.stsc,Ve.STSC),Ve.box(Ve.types.stsz,Ve.STSZ),Ve.box(Ve.types.stco,Ve.STCO))}static minf(e){return"audio"===e.type?Ve.box(Ve.types.minf,Ve.box(Ve.types.smhd,Ve.SMHD),Ve.DINF,Ve.stbl(e)):Ve.box(Ve.types.minf,Ve.box(Ve.types.vmhd,Ve.VMHD),Ve.DINF,Ve.stbl(e))}static hdlr(e){return Ve.box(Ve.types.hdlr,Ve.HDLR_TYPES[e])}static mdhd(e,t){t*=e;const n=Math.floor(t/(me+1)),s=Math.floor(t%(me+1));return Ve.box(Ve.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(e){const{type:t,timescale:n,duration:s}=e;return Ve.box(Ve.types.mdia,Ve.mdhd(n,s),Ve.hdlr(t),Ve.minf(e))}static tkhd(e){const{id:t,width:n=0,height:s=0,timescale:i}=e,r=e.duration*e.timescale,o=Math.floor(r/(me+1)),a=Math.floor(r%(me+1));return Ve.box(Ve.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,s>>8&255,255&s,0,0]))}static trak(e){return e.duration=e.duration||4294967295,Ve.box(Ve.types.trak,Ve.tkhd(e),Ve.mdia(e))}static trex(e){let t=e.id;return Ve.box(Ve.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static mvex(e){return Ve.box(Ve.types.mvex,...e.map(e=>Ve.trex(e)))}static mvhd(e){const t=e.timescale,n=t*e.duration,s=Math.floor(n/(me+1)),i=Math.floor(n%(me+1)),r=e.isLive?[255,255,255,255,255,255,255,255]:[s>>24,s>>16&255,s>>8&255,255&s,i>>24,i>>16&255,i>>8&255,255&i],o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,...r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ve.box(Ve.types.mvhd,o)}static moov(e){return Ve.box(Ve.types.moov,Ve.mvhd(e[0]),...e.map(e=>Ve.trak(e)),Ve.mvex(e))}static initSegment(e){const t=Ve.moov(e),n=new Uint8Array(Ve.FTYP.byteLength+t.byteLength);return n.set(Ve.FTYP),n.set(t,Ve.FTYP.byteLength),n}}let Re,Ge;Ve.types=Ze,Ve.HDLR_TYPES={video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])},Ve.STTS=fe,Ve.STSC=fe,Ve.STCO=fe,Ve.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ve.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),Ve.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ve.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ve.FTYP=Ve.box(Ve.types.ftyp,ye,ge,ye,be),Ve.DINF=Ve.box(Ve.types.dinf,Ve.box(Ve.types.dref,ve)),function(e){e.INIT_SEGMENT="INIT_SEGMENT",e.PARSING_DATA="PARSING_DATA"}(Re||(Re={})),function(e){e.PCM_INIT="PCM_INIT",e.PCM_DATA="PCM_DATA"}(Ge||(Ge={}));new class extends class{constructor(){this.current=0}}{constructor(...e){super(...e),this.sps=void 0,this.pps=void 0,this.spsIndex=void 0,this.ppsIndex=void 0}probe(e){this.parse(e,de.NAL_SPS);return this.sps?pe(new Uint8Array(this.sps.buffer)):""}parse(e,t){const n=new DataView(e);this.current=0;const s=[];let i=!1;for(this.spsIndex=-1,this.ppsIndex=-1;se(n,this);){const r=s.length,o=31&n.getUint8(this.current);switch(i=!0,o){case de.NAL_SLICE:case de.NAL_SLICE_IDR:case de.NAL_SLICE_DPA:case de.NAL_SLICE_DPB:case de.NAL_SLICE_DPC:case de.NAL_SEI:break;case de.NAL_SPS:const t=he(ee(e,this.current+1));0===t.fps&&(t.fps=25),this.spsIndex=r,this.sps=Object.assign(t,{buffer:null});break;case de.NAL_PPS:this.ppsIndex=r,this.pps={buffer:null};break;case de.NAL_UNKNOWN:default:i=!1}if(i&&(r&&(s[r-1].end=this.current-ie),s[r]=re.getStream(e,{type:o,start:this.current})),o===t)break}return s.length&&(s[s.length-1].end=e.byteLength),-1!==this.spsIndex&&(this.sps.buffer=s[this.spsIndex].buffer()),-1!==this.ppsIndex&&(this.pps.buffer=s[this.ppsIndex].buffer()),s}createTrack(e,t){const n={...oe,samples:[],id:1,type:"video",container:"video/mp2t",codec:null,timescale:9e4,inputTimeScale:9e4,sps:null,pps:null,width:null,height:null,fps:null},{height:s,width:i,fps:r,pixelRatio:o}=this.sps;return n.width=i,n.height=s,n.fps=r,n.pixelRatio=[o.den,o.num],n.sps=[new Uint8Array(e)],n.pps=[new Uint8Array(t)],n.codec=pe(n.sps[0]),n}}();const Le=new u("PlayerManager");class xe{constructor(){this.x=0,this.y=0,this.w=0,this.h=0}static create(e,t,n,s){const i=new xe();return i.x=e,i.y=t,i.w=n,i.h=s,i}static attach(e){const t=new xe();return t.x=e.offsetLeft,t.y=e.offsetTop,t.w=e.offsetWidth,t.h=e.offsetHeight,t}static sizeOf(e){const t=new xe();return t.w=e.offsetWidth,t.h=e.offsetHeight,t}static fork(e){const t=new xe();return t.x=e.offsetLeft,t.y=e.offsetTop,t.w=e.offsetWidth,t.h=e.offsetHeight,t}static fromPoints(e,t){const[n,s,i,r]=[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[0],t[0]),Math.max(e[1],t[1])];return xe.create(n,s,i-n,r-s)}static fromPoint(e,t,n,s="br"){const i=new xe();switch(i.x=e[0],i.y=e[1],s){case"br":i.x2=i.x+t,i.y2=i.y+n;break;case"bl":i.x2=i.x-t,i.y2=i.y+n;break;case"tl":i.x2=i.x-t,i.y2=i.y-n;break;case"tr":i.x2=i.x+t,i.y2=i.y-n}return i}set x1(e){this.w=this.x2-e,this.x=e}set y1(e){this.h=this.y2-e,this.y=e}get x2(){return this.x+this.w}set x2(e){this.w=e-this.x}get y2(){return this.y+this.h}set y2(e){this.h=e-this.y}get aspect(){return this.w/this.h}round(){return xe.create(Math.round(this.x),Math.round(this.y),Math.round(this.w),Math.round(this.h))}normalize(){const[e,t,n,s]=[Math.min(this.x,this.x2),Math.min(this.y,this.y2),Math.max(this.x,this.x2),Math.max(this.y,this.y2)];return xe.create(e,t,n-e,s-t)}rebound(e,t){const n=this.normalize();return n.x<0&&(n.x=0),n.y<0&&(n.y=0),n.x2>e&&(n.x=e-n.w),n.y2>t&&(n.y=t-n.h),n}scale(e,t){return t=t||e,xe.create(this.x*e,this.y*t,this.w*e,this.h*t)}unscale(e,t){return t=t||e,xe.create(this.x/e,this.y/t,this.w/e,this.h/t)}center(e,t){return xe.create((e-this.w)/2,(t-this.h)/2,this.w,this.h)}toArray(){return[this.x,this.y,this.w,this.h]}}class we{constructor(e){this.el=void 0,this.el=e}appendTo(e){return e.appendChild(this.el),this}emit(e){const t=document.createEvent("Event");t.initEvent(e,!0,!0),t.cropTarget=this,this.el.dispatchEvent(t)}removeClass(e){return this.el.className=this.el.className.split(" ").filter(t=>e!==t).join(" "),this}hasClass(e){return this.el.className.split(" ").filter(t=>e===t).length}addClass(e){return this.hasClass(e)||(this.el.className+=" "+e),this}listen(e,t){return this.el.addEventListener(e,e=>t(e.cropTarget,e)),this}}function Xe(e,t,n,s){let i,r,o,a;function l(n){const s=n instanceof TouchEvent?n.touches[0]:n,{top:l,left:h}=e.getBoundingClientRect();i=s.pageX,r=s.pageY,o=i-e.scrollLeft-h,a=r-e.scrollTop-l,n.preventDefault(),n.stopPropagation(),t(o,a,s)&&("mousedown"===n.type?(window.addEventListener("mousemove",c),document.addEventListener("mouseup",u)):"touchstart"===n.type&&(document.addEventListener("touchmove",c),document.addEventListener("touchend",u)))}function c(e){const t=e instanceof TouchEvent?e.changedTouches[0]:e;e.stopPropagation();const s=t.pageX-i,l=t.pageY-r;n(s+o,l+a,s,l)}function u(e){const t=e instanceof TouchEvent?e.changedTouches[0]:e,l=t.pageX-i,h=t.pageY-r;l&h&&n(l+o,h+a,l,h),document.removeEventListener("mouseup",u),window.removeEventListener("mousemove",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),s()}return"string"==typeof e&&(e=document.getElementById(e)),e.addEventListener("mousedown",l),e.addEventListener("touchstart",l),{remove:function(){e.removeEventListener("mousedown",l),e.removeEventListener("touchstart",l)}}}class We extends we{static create(e){const t=document.createElement("div");return t.className=e,new We(t)}}class Se{constructor(e,t,n,s){this.sw=void 0,this.sh=void 0,this.rect=void 0,this.locked=void 0,this.stuck=void 0,this.sw=t,this.sh=n,this.rect=e,this.locked=this.getCornerPoint(this.getOppositeCorner(s)),this.stuck=this.getCornerPoint(s)}static create(e,t,n,s){return new Se(e,t,n,s)}move(e,t){return xe.fromPoints(this.locked,this.translateStuckPoint(e,t))}getDragQuadrant(e,t){const n=this.locked[0]-e,s=this.locked[1]-t;return n<0&&s<0?"br":n>=0&&s>=0?"tl":n<0&&s>=0?"tr":"bl"}translateStuckPoint(e,t){const[n,s,i]=this.stuck;var r=null===n?i:n+e,o=null===s?i:s+t;return r>this.sw&&(r=this.sw),o>this.sh&&(o=this.sh),r<0&&(r=0),o<0&&(o=0),[r,o]}getCornerPoint(e){const t=this.rect;switch(e){case"n":return[null,t.y,t.x];case"s":return[null,t.y2,t.x2];case"e":return[t.x2,null,t.y2];case"w":return[t.x,null,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2];case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y]}}getOppositeCorner(e){switch(e){case"n":return"se";case"s":case"e":return"nw";case"w":return"se";case"se":return"nw";case"sw":return"ne";case"ne":return"sw";case"nw":return"se"}}}var ke={animateEasingFunction:"swing",animateFrames:30,multi:!1,multiMax:null,multiMin:1,cropperClass:"vcrop-widget",disabledClass:"vcrop-disable",canDrag:!0,canResize:!0,canSelect:!0,canRemove:!0,multiple:!1,autoFront:!0,active:!0,handles:["n","s","e","w","sw","nw","ne","se"],shade:!0,shadeClass:"vcrop-shade",shadeColor:"black",shadeOpacity:.5,widgetConstructor:null,x:0,y:0,w:100,h:100};class Te extends we{constructor(e,t){super(e),this.stage=void 0,this.pos=void 0,this.options=ke,this.stage=t,this.pos=xe.fork(this.el),this.createMover(),this.createHandles()}static create(e){const t=document.createElement("div");return t.setAttribute("tabindex","0"),t.className="vcrop-widget",new Te(t,e)}createMover(){let e,t,n;Xe(this.el,()=>!!this.stage.enabled&&(e=this.el.parentElement.offsetWidth,t=this.el.parentElement.offsetHeight,n=xe.fork(this.el),this.el.focus(),this.stage.activate(this),!0),(s,i,r,o)=>{this.pos.x=n.x+r,this.pos.y=n.y+o,this.render(this.pos.rebound(e,t))},()=>{this.emit("crop.change")})}createHandles(){this.options.handles.forEach(e=>{const t=We.create("vcrop-handle "+e);let n;t.appendTo(this.el),Xe(t.el,()=>{if(!this.stage.enabled)return!1;const t=this.el.parentElement,s=t.offsetWidth,i=t.offsetHeight;return n=Se.create(xe.fork(this.el),s,i,e),this.el.focus(),this.emit("crop.active"),!0},(e,t)=>this.render(n.move(e,t)),()=>{this.emit("crop.change")})})}render(e){e=e||this.pos,this.el.style.top=Math.round(e.y)+"px",this.el.style.left=Math.round(e.x)+"px",this.el.style.width=Math.round(e.w)+"px",this.el.style.height=Math.round(e.h)+"px",this.pos=e,this.stage.updateShades()}}class Ue{constructor(e){this.el=void 0,this.keys=["t","l","b","r"],this.shades=null,this.maskSahde=Me.create("all"),this.el=e}static attach(e){const t=new Ue(e);return t.init(),t}init(){this.shades={},this.keys.forEach(e=>{this.shades[e]=Me.create(e)})}enable(){this.keys.forEach(e=>this.shades[e].insert(this.el))}disable(){this.keys.forEach(e=>this.shades[e].remove())}adjust(e){const t=xe.fork(this.el),n=this.shades;n.t.h=e.y,n.b.h=t.h-e.y2,n.t.w=n.b.w=Math.floor(e.w),n.l.w=n.t.x=n.b.x=Math.ceil(e.x),n.r.w=t.w-(Math.ceil(e.x)+Math.floor(e.w))}enableMask(){this.maskSahde.w=this.el.offsetWidth,this.maskSahde.h=this.el.offsetHeight,this.maskSahde.x=0,this.maskSahde.insert(this.el)}disableMask(){this.maskSahde.remove()}}class Me{constructor(e){this.el=void 0,this.el=e}static create(e){const t=document.createElement("div");return t.className=`vcrop-shade ${e}`,new Me(t).color("#000").opacity("0.6")}insert(e){e.appendChild(this.el)}remove(){this.el.remove()}set w(e){this.el.style.width=e+"px"}set h(e){this.el.style.height=e+"px"}set x(e){this.el.style.left=e+"px"}color(e){return e&&(this.el.style.backgroundColor=e),this}opacity(e){return e&&(this.el.style.opacity=e),this}}class Ee extends we{constructor(e,t){super(e),this.options=void 0,this.enabled=!0,this.shapesManager=void 0,this.widgets=new Set(),this.active=void 0,this.options={...ke,...t},this.initDrag(),this.shapesManager=Ue.attach(this.el),this.shapesManager.enableMask()}canCreate(){return!!this.enabled&&(!!this.options.multi||!(this.widgets.size>=1))}initDrag(){let e,t,n;Xe(this.el,(s,i,r)=>{if(!this.canCreate())return!1;e=Te.create(this),t=e.pos,t.x=s,t.y=i;const{offsetWidth:o,offsetHeight:a}=this.el;return n=Se.create(t,o,a,"se"),this.addWidget(e),e.render(t),!0},(t,s,i,r)=>{e.render(n.move(i,r))},()=>{this.active.emit("crop.change")})}updateShades(){this.active&&this.shapesManager.adjust(this.active.pos)}refresh(){this.widgets.forEach(e=>{e.render()})}reorderWidgets(){var e=10;this.widgets.forEach(t=>{t.el.style.zIndex=`${e++}`,this.active===t?t.addClass("active"):t.removeClass("active")}),this.refresh()}activate(e){if(!this.enabled)return this;if(e=e||Array.from(this.widgets).pop()){if(this.active===e)return;this.active=e,this.widgets.delete(e),this.widgets.add(e),this.reorderWidgets(),this.active.el.focus(),this.shapesManager.enable(),this.shapesManager.disableMask(),e.emit("crop.activate")}else this.shapesManager.disable();return this}addWidget(e){return e.appendTo(this.el),this.activate(e),this.emit("new widget"),this}newWidget(e,t={}){const n=Te.create(this);return n.render(e),this.addWidget(n),n.el.focus(),n}startDrag(){}}n(".vcrop-widget .vcrop-handle {\n  display: none;\n  position: absolute;\n  border: 1px rgba(127, 127, 127, 0.8) solid;\n  width: 10px;\n  height: 10px;\n  box-sizing: border-box;\n  background: rgba(255, 255, 255, 0.8);\n}\n.vcrop-widget .vcrop-handle.nw {\n  top: -3px;\n  left: -3px;\n  cursor: nwse-resize;\n}\n.vcrop-widget .vcrop-handle.w {\n  top: 50%;\n  transform: translateY(-50%);\n  left: -3px;\n  cursor: ew-resize;\n}\n.vcrop-widget .vcrop-handle.sw {\n  bottom: -3px;\n  left: -3px;\n  cursor: nesw-resize;\n}\n.vcrop-widget .vcrop-handle.ne {\n  top: -3px;\n  right: -3px;\n  cursor: nesw-resize;\n}\n.vcrop-widget .vcrop-handle.e {\n  top: 50%;\n  transform: translateY(-50%);\n  right: -3px;\n  cursor: ew-resize;\n}\n.vcrop-widget .vcrop-handle.se {\n  bottom: -3px;\n  right: -3px;\n  cursor: nwse-resize;\n}\n.vcrop-widget .vcrop-handle.n {\n  left: 50%;\n  transform: translateX(-50%);\n  top: -3px;\n  cursor: ns-resize;\n}\n.vcrop-widget .vcrop-handle.s {\n  left: 50%;\n  transform: translateX(-50%);\n  bottom: -3px;\n  cursor: ns-resize;\n}\n.vcrop-widget.active .vcrop-handle {\n  display: block;\n}\n.vcrop-widget {\n  position: absolute;\n  box-sizing: border-box;\n  border: 1px white dashed;\n  opacity: 0.7;\n  background: transparent;\n  transition: opacity 1s;\n  padding: 0;\n  margin: 0;\n  cursor: move;\n}\n.vcrop-widget:hover {\n  transition: opacity 0.8s;\n  opacity: 0.8;\n}\n.vcrop-widget:focus {\n  transition: opacity 0.5s;\n  opacity: 1;\n  outline-style: auto;\n  outline-width: 3px;\n  outline-color: rgba(0, 0, 0, 0.3);\n}\n.vcrop-shade {\n  background: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.4s, background-color 0.7s;\n  position: absolute;\n}\n.vcrop-shade.l {\n  top: 0px;\n  left: 0px;\n  height: 100%;\n}\n.vcrop-shade.r {\n  top: 0px;\n  right: 0px;\n  height: 100%;\n}\n.vcrop-shade.t {\n  top: 0px;\n}\n.vcrop-shade.b {\n  bottom: 0px;\n}\n.vcrop-stage {\n  position: absolute;\n  width: 100%;\n}\n.vcrop-image-stage img {\n  position: absolute;\n  z-index: -1;\n}\n.vcrop-ux-inactive-handles .vcrop-widget .vcrop-handle {\n  display: block;\n}\n.vcrop-widget img {\n  width: 100%;\n  height: auto;\n}\n.vcrop-ux-fade-more .vcrop-widget {\n  opacity: 0.25;\n}\n.vcrop-ux-fade-more .vcrop-widget:hover {\n  transition: opacity 0.4s;\n  opacity: 0.8;\n}\n.vcrop-ux-fade-more .vcrop-widget:focus {\n  transition: opacity 0.5s;\n  opacity: 1;\n  outline-style: auto;\n  outline-width: 3px;\n  outline-color: rgba(0, 0, 0, 0.3);\n}\n.vcrop-ux-fade-more .vcrop-widget {\n  opacity: 0.25;\n}\n.vcrop-ux-fade-more .vcrop-widget:hover {\n  opacity: 0.65;\n}\n.vcrop-ux-keep-current .vcrop-widget.active {\n  opacity: 1;\n  outline-style: auto;\n  outline-width: 3px;\n  outline-color: rgba(0, 0, 0, 0.3);\n}\n.vcrop-ux-no-outline .vcrop-widget {\n  outline: none !important;\n}\n.vcrop-disable.vcrop-stage {\n  opacity: 0.8;\n}\n.vcrop-disable.vcrop-stage .vcrop-widget {\n  outline: none !important;\n}\n");var Ce={attach:function(e,t){return new Ee(e,t)},Rect:xe};class Ne{constructor(e,t,n){this.canvas=void 0,this.ctx=void 0,this.video=void 0,this.parent=void 0,this.container=void 0,this.video=e,this.parent=t,this.container=n}getSize(e=this.video){let t=e.width,n=e.height;e instanceof HTMLVideoElement&&(t=e.videoWidth,n=e.videoHeight);const{width:s,height:i}=e.getBoundingClientRect();return{width:t,height:n,w:s,h:i}}initCanvas(){const e=document.createElement("canvas"),t=e.getContext("2d");e.className="player-center";const{width:n,height:s,w:i,h:r}=this.getSize(this.video);e.width=n,e.height=s,e.style.width=i+"px",e.style.height=r+"px",this.parent.appendChild(e),this.canvas=e,this.ctx=t}drawCanvas(e){const{width:t,height:n}=this.getSize(e);this.ctx.drawImage(e,0,0,t,n,0,0,t,n)}destory(){}capture(e,t=this.video,n=!0){let s,i,r,o,a=0,l=0;e?({x:a,y:l,width:r,height:o,w:s,h:i}=e):({width:r,height:o,w:s,h:i}=this.getSize(t));let c=r,u=o;n&&(c=s,u=i);const h=document.createElement("canvas"),d=h.getContext("2d");return h.width=c,h.height=u,d.drawImage(t,a,l,r,o,0,0,c,u),h.toDataURL()}screenshot(e){this.initCanvas(),this.drawCanvas(this.video);const{width:t,height:n,w:s,h:i}=this.getSize(this.video),r=document.createElement("div");r.className="player-center",r.style.width=s+"px",r.style.height=i+"px",this.parent.appendChild(r);const o=t/s,a=Ce.attach(r,{multi:!1});a.listen("new widget",()=>{const t=Array.from(a.widgets)[0];t.listen("crop.change",()=>{const{x:n,y:s,w:i,h:r}=t.pos;e&&e(t.el,{x:n,y:s,w:i,h:r})})});return{getScreenshot:e=>{const s=Array.from(a.widgets)[0];if(!s)return null;const{x:i,y:r,w:l,h:c}=s.pos,u={x:i*o,y:r*o,width:l*o,height:c*o,w:l,h:c},h=this.capture(u,this.canvas,e),d=this.container.getBoundingClientRect();return{dataUrl:h,pos:{x:(d.width-t)/2+i,y:(d.height-n)/2+r,w:l,h:c}}},remove:()=>{r.remove(),this.canvas.remove()}}}path(e,t,n,s){const i=this.ctx;i.beginPath(),i.moveTo(e,25)}stroke(){this.ctx.stroke()}fill(){this.ctx.fill()}}function Ie(e){const{type:t,roate:n,...i}=e;return s.createElement("i",i,s.createElement("svg",{className:`icon${n?" icon-roate":""}`,"aria-hidden":"true"},s.createElement("use",{xlinkHref:`#icon${t}`})))}n(".player {\n  display: inline-block;\n  height: 100%;\n  width: 100%;\n  min-width: 100px;\n  min-height: 100%;\n  color: #ddd;\n  position: relative;\n}\n.player * {\n  margin: 0;\n  padding: 0;\n  font-size: 16px;\n  box-sizing: border-box;\n  user-select: none;\n}\n.player .icon {\n  width: 1em;\n  height: 1em;\n  vertical-align: 0em;\n  fill: currentColor;\n  overflow: hidden;\n}\n.player .icon-roate {\n  animation: loadingCircle 1s infinite linear;\n}\n.player .info {\n  display: inline-block;\n  vertical-align: bottom;\n}\n.player-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  background: #000;\n}\n.player-video-warp {\n  position: relative;\n  flex: 1;\n  width: 100%;\n}\n.player-video-instance {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.player-video-state {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.player-video-state-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 2em;\n  width: 2em;\n  border-radius: 5%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.player-video-state .icon {\n  height: 2em;\n  width: 2em;\n}\n.player-video-infos {\n  position: absolute;\n  padding-right: 20px;\n  bottom: 10px;\n  background-color: #ddd;\n  color: #000;\n  min-width: 100px;\n}\n.player-video-bottom {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  transition: height 0.5s;\n  overflow: hidden;\n}\n.player-video-btnWrap {\n  position: absolute;\n  left: 0;\n  bottom: 4px;\n  display: flex;\n  z-index: 1;\n}\n.player-video-btnWrap-btn {\n  width: 20px;\n  height: 16px;\n  align-items: center;\n  cursor: pointer;\n}\n.player-video-progress {\n  position: relative;\n  overflow: hidden;\n  height: 6.5em;\n  background: rgba(0, 0, 0, 0.5);\n}\n.player-video-progress-speed {\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.player-video-progress-speed-wrap {\n  width: 100px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.player-video-progress-speed-wrap span {\n  display: inline-block;\n  width: 30px;\n  color: #ffffff;\n  font-size: 12px;\n  line-height: 30px;\n  text-align: center;\n}\n.player-video-progress-bar-time {\n  position: relative;\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n}\n.player-video-progress-bar-time-wrap {\n  position: relative;\n  top: 20px;\n  flex: 1;\n  height: 0.5em;\n  border-bottom: 1px solid #0a92e2;\n}\n.player-video-progress-icon {\n  display: inline-block;\n  width: 30px;\n  height: 20px;\n  color: #ffffff;\n  text-align: center;\n  cursor: pointer;\n}\n.player-video-progress .time-icon:first-of-type {\n  text-align: left;\n  padding-top: 5px;\n}\n.player-video-progress .time-icon:last-of-type {\n  padding-top: 5px;\n  text-align: right;\n}\n.player-video-progress-bar-timetext {\n  position: absolute;\n  left: 0px;\n  right: -1px;\n  top: 0px;\n  height: 30px;\n  overflow: hidden;\n}\n.player-video-progress-bar-timetext-div {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.player-video-progress-bar-timetext span {\n  position: absolute;\n  top: 0px;\n  color: #ffffff;\n  font-size: 12px;\n  text-indent: -15px;\n}\n.player-video-progress-bar-timetext span::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -11px;\n  width: 1px;\n  height: 5px;\n  background-color: #0a92e2;\n}\n.player-video-progress-bar-timetext span:first-of-type {\n  text-indent: -10px;\n}\n.player-video-progress-bar-timetext span:last-of-type {\n  text-indent: -20px;\n}\n.player-video-progress-bar-timetext span:last-of-type::before {\n  left: -1px;\n}\n.player-video-progress-video-track {\n  position: relative;\n  margin: 10px 0px;\n  height: 0.5em;\n}\n.player-video-progress-bar,\n.player-video-progress-bar-warp {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  height: 0.5em;\n  overflow: hidden;\n}\n.player-video-progress-bar {\n  background-color: hsla(0, 0%, 100%, 0.2);\n  transform-origin: 0 0;\n  transition: transform 0.2s;\n}\n.player-video-progress-bar-normal {\n  background-color: red;\n}\n.player-video-progress-bar-files {\n  position: relative;\n  height: 10px;\n}\n.player-video-progress-bar-files p {\n  position: absolute;\n  top: 0;\n  height: 10px;\n  background-color: #0a92e2;\n}\n.player-video-progress-scroll {\n  margin: 10px 30px;\n  height: 0.5em;\n  background-color: hsla(0, 0%, 100%, 0.2);\n}\n.player-video-progress-scroll-bar {\n  position: relative;\n  left: 0;\n  height: 0.5em;\n  background-color: hsla(0, 0%, 100%, 0.5);\n  border-radius: 0.5em;\n  transform-origin: left;\n}\n.player-video-progress-title {\n  position: absolute;\n  background-color: #ffffff;\n  width: 140px;\n  line-height: 20px;\n  border-radius: 3px;\n  text-align: center;\n  z-index: 2;\n  font-size: 12px;\n  color: #333333;\n}\n.player-video-progress-pos {\n  display: inline-block;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 2px;\n  height: 15px;\n  background-color: red;\n}\n.player-video-controls {\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n.player-video-controls-left,\n.player-video-controls-right {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 32px;\n}\n.player-video-controls-right {\n  place-content: flex-end;\n}\n.player-video-controls-btn {\n  display: inline-flex;\n  align-items: center;\n  margin: 0 5px;\n  height: 24px;\n  cursor: pointer;\n  z-index: 10;\n}\n.player-video-controls-volume {\n  z-index: 10;\n  transition: width 0.3s ease 0s, opacity 0.28s step-end 0s;\n  height: 4px;\n  cursor: pointer;\n  -webkit-tap-highlight-color: transparent;\n  box-sizing: unset !important;\n  margin: 0px;\n  padding: 22px 0px;\n  background: transparent;\n}\n.player-center {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n@keyframes loadingCircle {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n");const Fe={rtsp:"ws",rtmp:"ws",default:"http"},Ae=Object.keys(Fe);function ze(e,t){const n=Ae.find(t=>e.startsWith(t))||"default",s=Fe[n];return"ws"===s&&(e=`ws://${t||"127.0.0.1:19060"}/URL/`+e),{url:e,type:s}}var Ye=s.forwardRef((function(e,n){const[i,r]=t.useState(!0),[o,a]=t.useState(null),l=t.useRef(!1),c=t.useRef(null),u=t.useRef(null),h=t.useRef(null),d=t.useRef(null),p=t.useRef(null),m=t.useRef(!1);function f(e,t=!0){if(n){const s=Object.create(e),i={play:b,pause:g,seek:v,capture:Z,screenshot:R,showMessage:G,fullScreen:L,exitFullScreen:x,resize:y,playTime:0};Object.keys(i).forEach(e=>{s[e]=i[e]}),n.current=new Proxy(s,{set:(t,n,s)=>(t.hasOwnProperty(n)?t[n]=s:e[n]=s,!0)}),t&&e.copyEvent(p.current)}}function y(){if(!d.current)return;const{avParams:e}=d.current;if(!e)return;const{width:t,height:n}=e.video,{width:s,height:i}=u.current.getBoundingClientRect(),r=Math.floor(1e4*Math.min(s/t,i/n))/1e4;d.current.setSize(r*t,r*n,t,n)}function b(){l.current=!0,d.current&&d.current.play()}function g(){l.current=!1,d.current&&d.current.pause()}function v(t){const n=d.current;n.seek(async()=>{const s=await t();n.url=ze(s,e.host).url})}t.useEffect(()=>()=>m.current=!0,[]),t.useEffect(()=>{if(!e.url)return;const{type:t,url:s}=ze(e.url,e.host);return r(!0),async function(e){return Le.warn(!1,"当前总播放数0, 推荐播放数16"),new q(e)}({el:h.current,url:s,type:t,isLive:e.isLive}).then(t=>{p.current.disable(),d.current=t,f(t),t.load().then(()=>{(e.autoplay||l.current)&&b(),y(),t.shouldRender=e.shouldRender})}),()=>{if(d.current.destory(),m.current){if(p.current.destory(),!n)return;n.current!==p.current&&n.current!==d.current||(n.current=null)}else n&&(f(p.current,!1),p.current.disable(!1))}},[e.url]),t.useEffect(()=>(addEventListener("resize",y),()=>removeEventListener("resize",y)),[]);const Z=e=>{const t=d.current;return new Ne(t.el,u.current,c.current).capture(e)},R=e=>{const t=d.current;return new Ne(t.el,u.current,c.current).screenshot(e)},G=e=>{e||a(e),d.current.onerror(e)},L=e=>{c.current.requestFullscreen(),c.current.onfullscreenchange=t=>{document.fullscreenElement===t.target||(c.current.onfullscreenchange=null,e&&e()),y()}},x=()=>{document.exitFullscreen()};if(!d.current){const e=new V({},"EmtpyPlayer");!function(e){function t(){r(!0)}function n(){r(!1)}e.on("waiting",t),e.on("seeking",t),e.on("loadedmetadata",n),e.on("playing",n),e.on("destory",n),e.on("error",e=>{r(!1),a(e),d.current!==p.current&&d.current.destory()}),e.on("timeupdate",e=>{v(e)})}(e),p.current=e,d.current=e,n&&f(e,!1)}return s.createElement("div",{className:"player",style:e.style,ref:c},s.createElement("div",{className:"player-container"},s.createElement("div",{className:"player-video-warp",ref:u},s.createElement("div",{className:"player-video-instance",ref:h}),s.createElement("div",{className:"player-center",style:{width:"100%",height:"100%"}}),o?s.createElement("span",{className:"player-center"},o):null,s.createElement("div",{className:"player-video-state"},i?s.createElement("div",{className:"player-video-state-loading"},s.createElement(Ie,{type:"loading",roate:!0})):null),s.createElement("div",{className:"player-video-infos",style:{zIndex:100,display:"block"}},null)),e.children))}));async function He(e,t,n=6e4){return e="/api/vms/v1/webuas/device"+e,new Promise((n,s)=>{fetch(e,t).then(e=>{if(e.ok)return e.json()}).then(e=>{e.error_code?s({code:e.error_code,message:e.description||e.message}):n(e.data)}).catch(e=>e)})}He.get=(e,t,...n)=>He(function(e,t){if(!t)return"";const n=Object.keys(t).map((e,n)=>`${e}=${t[e]}`);return`${e}${n.length?`?${n.join("&")}`:""}`}(e,t),{headers:{Accept:"application/json"}},...n),["POST","PUT","DELETE"].forEach(e=>{He[e.toLowerCase()]=(t,n,...s)=>He(t,{method:e,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n)},...s)});const Je=He;function _e(e,n,s){const i=t.useRef(!1),[r,o]=t.useState(!1),a=t.useRef(null),l=t.useRef(null);t.useEffect(()=>{const t=e.playerRef.current,i=t.on("play",()=>a.current()),r=t.on("pause",()=>{o(!1),l.current(),s()}),c=t.on("playing",()=>{o(!0),n()});return()=>{s(),i(),c(),r()}},[]);const c=t.useCallback(()=>{o(!1);const t=e.playerRef.current,{download:n}=t;n.onpause=()=>l.current(),n.onresume=()=>a.current(),t.once("playing",()=>{i.current=!1,n.onpause=null,n.onresume=null}),t.once("pause",()=>{i.current=!1,n.onpause=null,n.onresume=null})},[]);return a.current=t.useCallback(()=>{const{camera_id:t,source_type:n,id:s}=e;var i;i={camera_id:t,source_type:n,id:s},Je.get("/video/record/replay-resume",i)},[e.camera_id,e.id]),l.current=t.useCallback(()=>{const{camera_id:t,source_type:n,id:s}=e;var i;i={camera_id:t,source_type:n,id:s},Je.get("/video/record/replay-pause",i)},[e.camera_id,e.id]),{isPlaying:r,framePlay:function(){const t=e.playerRef.current;i.current||(i.current=!0,c()),t.framePlay()}}}function De(e){return new Date(e).getTime()/1e3}function Pe(e){const t=parseInt(`${e}`),n=parseInt(`${t/3600}`),s=parseInt(`${(t-60*n*60)/60}`),i=t-60*n*60-60*s;return`${n<10?"0"+n:n}:${s<10?"0"+s:s}:${i<10?"0"+i:i}`}function Be(e){const t=new Date(e),n=t.getFullYear(),s=t.getMonth()+1,i=t.getDate();return`${n}-${s<10?"0"+s:s}-${i<10?"0"+i:i}`}function Qe(e,n){const[s,i]=t.useState(0),r=t.useRef({interval:0}),o=t.useRef(null);function a(){if(!e.fileData.length)return;const t=e.playerRef.current,{start_time:s}=e,{startTime:r,playTime:o}=function(e,t){const n=e.fileData,s=e.playerRef.current;let i,r,o=Math.round(s.currentTime/1e3);t.current&&(i=De(t.current));for(let e=0;e<n.length;e++){const t=e===n.length-1,a=n[e];if(r=De(a.end_time),i>r)continue;i<De(a.start_time)&&(i=De(a.start_time));const l=r-i;if(o<=l&&!t)break;o>=l&&!t?o-=l:t&&l<=o+1&&(s.currentTime===s.endV||s.currentTime===s.endA)&&s.pause()}return{startTime:i,playTime:o}}(e,n),a=De(new Date(s).setHours(0,0,0,0));i(r-a+o),t.playTime=1e3*r+1e3*o}function l(){clearInterval(r.current.interval)}return(t.useEffect(()=>{o.current=a},[e.fileData]),{realPlayTime:s,updateTime:function(){l(),r.current.interval=window.setInterval(()=>{o.current()},1e3)},cancelTime:l})}const Ke=["1/16","1/8","1/4","1/2","1","2","4","8","16"],Oe=[-4,-3,-2,-1,0,1,2,3,4];function je(e){const[n,i]=t.useState(Ke[4]),r=t.useRef(null);function o(t){let s=Ke.findIndex(e=>e===n);if(t?s+=1:s-=1,s>=Ke.length||s<0)return;i(Ke[s]);const r=Oe[s];e.playerRef.current.playbackRate=r<0?1/(1<<-r):1<<r}t.useEffect(()=>{const t=Ke.findIndex(e=>e===n);return-1!==t&&(clearTimeout(r.current),r.current=self.setTimeout(()=>{!function(t){const{id:n,camera_id:s,source_type:i}=e;if(!n)return;r={camera_id:s,source_type:i,id:n,speed:t},Je.get("/video/record/replay-speed",r);var r}(Oe[t])},300)),()=>clearTimeout(r.current)},[n]);const a=s.createElement(s.Fragment,null,s.createElement(Ie,{className:"player-video-progress-icon",type:"left",onClick:()=>o(!1)}),s.createElement("span",null,n,"x"),s.createElement(Ie,{className:"player-video-progress-icon",type:"right",onClick:()=>o(!0)}));return{setSpeed:i,speedJsx:a}}function $e(e,n,i,r){const[o,a]=t.useState(!1),l=t.useRef(null);return t.useEffect(()=>{const{start_time:t}=e;let s,o;function c(e,t,n){const s=l.current;s.style.left=`${e}px`,s.style.top=`${t+40}px`,s.innerHTML=n}function u(e){return`${Be(t)} ${Pe(1e4*e/r)}`}const{remove:h}=function(e,t,n,s){let i,r;function o(n){const s=n.target.offsetLeft;i=n.offsetX,r=n.offsetY,n.preventDefault(),n.stopPropagation(),t(i,r,s)&&"mouseenter"===n.type&&(e.addEventListener("mousemove",a),e.addEventListener("mouseleave",l))}function a(e){e.preventDefault(),e.stopPropagation();const t=e.target.offsetLeft;let s=e.offsetX-i;const o=e.offsetY-r;t>0&&(s+=t),n(s,o,s+i)}function l(t){const o=t.target.offsetLeft;let c=t.offsetX-i;const u=t.offsetY-r;o>0&&(c+=o),c&u&&n(c,u,c+i),e.removeEventListener("mouseleave",l),e.removeEventListener("mousemove",a),s()}return"string"==typeof e&&(e=document.getElementById(e)),e.addEventListener("mouseenter",o),{remove:function(){e.removeEventListener("mousemove",o)}}}(n.current,(e,t,n)=>{a(!0),s=i.current.offsetWidth;let r=e;return n<0&&(r=e+n),s-r<140&&(r=s-140),c(r,t,u(e)),o=l.current.offsetLeft,!0},(e,t,n)=>{let i=o+e;s-i<140&&(i=s-140),c(i,t,u(n))},()=>{a(!1)});return()=>h()},[r]),s.createElement("div",{ref:l,style:{display:o?"block":"none"},className:"player-video-progress-title"})}function qe(e,n,i,r){const[o,a]=t.useState(!1),l=t.useRef(null),c=t.useRef(null),u=t.useRef(null),h=t.useRef(""),{totalLength:d}=i.current;return t.useEffect(()=>{const{fileData:t,start_time:i}=e;0!==t.length&&(c.current=t.map(e=>{const t=De(new Date(i).setHours(0,0,0,0)),o=De(e.start_time),a=De(e.end_time);let l=Math.round(n*(o-t)/1e4),c=Math.round((a-o)*n/1e4);return s.createElement("p",{style:{left:`${l}px`,width:`${c}px`},key:e.file_name,onDoubleClick:e=>r(e,l)})}))},[e.fileData,n]),t.useEffect(()=>{!function(){const{fileData:t}=e;if(0===t.length)return void(h.current="");const s=t[0].start_time;h.current=s;const i=De(new Date(s).setHours(0,0,0,0)),r=De(s),o=parseInt(`${n/1e4*(r-i)}`);u.current.style.left=`${o}px`,a(!0)}()},[e.fileData]),{videoTrack:s.createElement("div",{className:"player-video-progress-video-track"},s.createElement("div",{className:"player-video-progress-bar-warp"},s.createElement("div",{className:"player-video-progress-bar player-video-progress-bar-buffer",style:{transform:"scaleX()"}},s.createElement("div",{className:"player-video-progress-bar-files",ref:l,style:{width:`${d}px`}},c.current,s.createElement("i",{style:{display:o?"block":"none"},className:"player-video-progress-pos",ref:u}))))),beginTime:h,filesRef:l,positionRef:u}}const et=[1,2,3,4,5,6,8,10,12,15,20,24,30,40,60,120];function tt(e){const[n,s]=t.useState([]);return t.useEffect(()=>{const t=function(){let t=["0:00"];return t=function e(t,n,s){if(t<=0)return s;const i=t-n;let r=i/60+"";r=parseInt(r)<10?`0${parseInt(r)}`:parseInt(r)+"";const o=i%60<10?`0${i%60}`:i%60;return s.push(`${r}:${o}`),e(i,n,s)}(1440,e,t),t}();s([...t.reverse()])},[e]),n}function nt(e){const[n,s]=t.useState({counts:120,leftPos:0,initCount:120});return t.useEffect(()=>{const{remove:t}=function(e,t,n,s){function i(n){n.preventDefault(),n.stopPropagation(),t(n)&&"mouseenter"===n.type&&(e.addEventListener("mousewheel",r),e.addEventListener("mouseleave",o))}function r(e){e.stopPropagation(),e.preventDefault(),n(e.deltaY,e.clientX)}function o(t){e.removeEventListener("mouseleave",o),e.removeEventListener("mousewheel",r),s()}return"string"==typeof e&&(e=document.getElementById(e)),e.addEventListener("mouseenter",i),{remove:function(){e.removeEventListener("mousewheel",i)}}}(e.current,e=>!0,(t,n)=>{s(s=>{const{x:i}=e.current.getBoundingClientRect(),r=s.counts,o=et.findIndex(e=>e===120/r);let a=s.counts;return t>0?o>0&&(a=120/et[o-1]):o<et.length-1&&(a=120/et[o+1]),{...s,counts:a,leftPos:n-i,initCount:r}})},()=>{});return()=>t()},[]),n}function st(e){const n=t.useRef(null),i=t.useRef(null),r=t.useRef(null),o=t.useRef(12),a=t.useRef(0),l=t.useRef({leftPos:0,beforeCount:0}),c=function(e){const[n,s]=t.useState(null);function i(){const t=e.current.offsetWidth/12;s(t)}return t.useEffect(()=>(i(),window.addEventListener("resize",i),()=>removeEventListener("resize",i)),[]),n}(i),{counts:u,leftPos:h,initCount:d}=nt(e),p=tt(u);a.current=1e4*c/(60*u);const m=t.useRef({secondsWidth:a.current,counts:12,totalLength:12*c});return t.useEffect(()=>{o.current=1440/u,l.current={...l.current,leftPos:h,beforeCount:d}},[u]),t.useEffect(()=>{},[c]),t.useEffect(()=>{m.current={secondsWidth:a.current,counts:1440/u,totalLength:1440/u*c}},[u,c]),{ruleRef:r,rulejsx:s.createElement("div",{className:"player-video-progress-bar-time",ref:n},s.createElement("div",{className:"player-video-progress-bar-time-wrap",ref:i}),s.createElement("div",{className:"player-video-progress-bar-timetext"},s.createElement("div",{ref:r,className:"player-video-progress-bar-timetext-div",style:{width:`${c*(p.length-1)}px`}},p.map((e,t)=>s.createElement("span",{key:t,style:{left:`${t*c}px`}},e))))),ruleApiRef:m,baseWidth:c,secondsWidth:a.current,ruleLengthRef:o,ruleCount:u,leftRef:l}}function it(e){const n=t.useRef(null),i=t.useRef(null),r=t.useRef(null),o=t.useRef(null),{ruleRef:a,rulejsx:l,baseWidth:c,secondsWidth:u,ruleLengthRef:h,ruleCount:d,leftRef:p,ruleApiRef:m}=st(o),{filesRef:f,videoTrack:y,beginTime:b,positionRef:g}=qe(e,u,m,(function(t,n){const{start_time:s}=e,i=t.nativeEvent.layerX+n,r=`${Be(s)} ${Pe(1e4*i/u)}`;g.current.style.left=`${i}px`,e.seekCallback&&e.seekCallback(r),1!==e.playerRef.current.playbackRate&&(R("1"),e.playerRef.current.playbackRate=1);b.current=r})),{realPlayTime:v,updateTime:Z,cancelTime:V}=Qe(e,b),{setSpeed:R,speedJsx:G}=je(e),L=$e(e,f,n,u),{isPlaying:x,framePlay:w}=_e(e,Z,V);function X(){const e=r.current.offsetWidth,t=h.current,n=12/t;i.current.style.width=n&&`${n*e}px`;const{offsetWidth:s}=i.current,o=e-s;return o?(t*c-e)/o:1}function W(){const e=r.current.offsetWidth,{leftPos:t,beforeCount:n}=p.current,s=-a.current.offsetLeft,i=h.current;let o=1;if(!d||n===d)return;o=n/d;let l=(t+s)*o-t;return l<0&&(l=0),l>i*c-e&&(l=i*c-e),{eventLeft:l,scale:o}}function S(e){const t=g.current,n=t.offsetLeft;t.style.left=`${n*e}px`}return t.useEffect(()=>{const e=parseInt(`${u*v/1e4}`);g.current.style.left=`${e}px`},[v]),t.useEffect(()=>{let e,t,s,o,l,c;const{remove:u}=Xe(i.current,(a,u,d)=>(s=r.current.offsetWidth,t=i.current.offsetLeft-30,e=i.current.offsetWidth,o=h.current,l=(n.current.offsetWidth-60)/12,c=(o*l-s)/(s-e),!0),(n,r,o,l)=>{if(o){let n=t+o;n>s-e&&(n=s-e),n<0&&(n=0),a.current.style.left=`${-n*c}px`,f.current.style.left=`${s/e*-n}px`,i.current.style.left=`${n}px`}},()=>{});return()=>u()},[]),t.useEffect(()=>{const e=X();if(W()){const{eventLeft:t,scale:n}=W();!function(e,t){a.current.style.left=`${-e}px`,i.current.style.left=1!==t?`${e/t}px`:"0px",f.current.style.left=`${-e}px`}(t,e),S(n)}},[d]),t.useEffect(()=>{const e=X();!function(e,t){i.current.style.left=`${e}px`,f.current.style.left=`${-e*t}px`,a.current.style.left=`${-e*t}px`}(function(){const e=r.current.offsetWidth,{offsetWidth:t,offsetLeft:n}=i.current,s=e-t;let o=1,a=n-30;o=document.fullscreenElement?e/t:t/e;return a*=o,a=Math.min(a,s),a=Math.max(a,0),a}(),e),S(e)},[c]),s.createElement("div",{className:"player-video-progress",ref:n},s.createElement("div",{className:"player-video-progress-speed"},s.createElement("div",{className:"player-video-progress-speed-wrap"},G),x?s.createElement(Ie,{className:"player-video-progress-icon",type:"pause",title:"播放",onClick:function(){e.playerRef.current.pause()}}):s.createElement(Ie,{className:"player-video-progress-icon",type:"play",title:"暂停",onClick:function(){e.playerRef.current.play()}}),s.createElement(Ie,{className:"player-video-progress-icon",type:"singleframe",title:"单帧播放",onClick:w})),s.createElement("div",{ref:o,style:{margin:"0 30px"}},l,y),s.createElement("div",{className:"player-video-progress-scroll",ref:r,style:{width:`${12*c}px`}},s.createElement("div",{ref:i,className:"player-video-progress-scroll-bar"})),L)}function rt(e){const[n,i]=t.useState(!1),r=function(e){const[n,i]=t.useState(!0),[r,o]=t.useState(0),[a,l]=t.useState(n),c=t.useRef(0),u=t.useRef(0),h=t.useRef(0),d=t.useRef(0);function p(){i(e=>{const t=!e;return t&&0!==u.current?o(0):t||o(c.current||1),t})}return t.useEffect(()=>{c.current=u.current,u.current!==r&&(u.current=r,0!==r||n?0!==r&&n&&i(!1):i(!0),clearTimeout(d.current),d.current=window.setTimeout(()=>e.playerRef.current.volume=r,200))},[r]),s.createElement("div",{className:"player-video-controls-btn",onMouseOver:function(){clearTimeout(h.current),l(!1)},onMouseLeave:function(){clearTimeout(h.current),h.current=window.setTimeout(()=>l(!0),500)}},s.createElement("input",{style:{display:a?"none":"block"},type:"range",step:"any",max:"1",className:"player-video-controls-volume","aria-valuemax":100,"aria-valuemin":0,"aria-label":"volume","aria-valuenow":100,value:r,onChange:function(e){o(Number(e.target.value))}}),n?s.createElement(Ie,{className:"player-video-controls-btn",type:"mute",title:"静音",onClick:p}):s.createElement(Ie,{className:"player-video-controls-btn",type:"volume",title:"音量",onClick:p}))}(e);return s.createElement("div",{className:"player-video-controls"},s.createElement("div",{className:"player-video-controls-right"},r,n?s.createElement(Ie,{className:"player-video-controls-btn",type:"exitfullscreen",title:"退出全屏",onClick:function(){e.playerRef.current.exitFullScreen()}}):s.createElement(Ie,{className:"player-video-controls-btn",type:"fullscreen",title:"全屏",onClick:function(){i(!0),e.playerRef.current.fullScreen(()=>{i(!1)})}})))}function ot(e,n){const[s,i]=t.useState(!0);return t.useEffect(()=>{const t=e.current;t._controls!==s&&i(t._controls),t.on("controls",e=>{i(e)})},[]),t.useEffect(()=>{i(e.current._controls&&n)},[n]),s}const at=!function(){if(localStorage.getItem("browserval"))return!0;const e=navigator.userAgent.toLocaleLowerCase(),t=/(chrome)\/([\w.]+)/.exec(e);return(t&&parseInt(t[2]))>=74&&(localStorage.setItem("browserval","1"),!0)}()&&"请下载新版chrome",lt=s.createElement("div",null,"请下载插件",s.createElement("a",{href:"/bclient/commonresource/chromeocx.exe"},"点击下载")),ct=()=>s.createElement(s.Fragment,null,s.createElement("div",null,"有可更新插件",s.createElement("a",{href:"/bclient/commonresource/chromeocx.exe"},"点击下载")),s.createElement("div",null,"当前版本",ht,", 服务器版本",ut));let ut="",ht="";function dt(e){const[n,s]=t.useState(at);function i(t,n){e.current.error||function(e,t){const n=e.split(".").map(e=>Number(e)),s=t.split(".").map(e=>Number(e));for(let e=0;e<n.length;e++)if(s[e]=s[e]||0,n[e]!==s[e])return n[e]>s[e];return n.length===s.length}(t,n)||(e.current.showMessage(ct),s(lt))}return t.useEffect(()=>{n&&e.current.showMessage(n),e.current.on("downerror",t=>{"network error 22"===t&&(e.current.showMessage(lt),s(lt))}),e.current.on("downmsg",e=>{ht=e.server_version,ut&&i(ht,ut)}),async function(){if(ut)return ut;const e=await fetch("/bclient/commonresource/config.json"),t=(await e.json()).chromeocxVersion;return ut=t.split(" ")[0].substr(2),ut}().then(e=>{ht&&i(ht,e)})},[]),n}function pt(e){const n=dt(e),[s,i]=t.useState(n);return t.useEffect(()=>{e.current.on("error",e=>i(e))},[]),{broken:n,error:s,setErrorStatus:function(t){e.current.showMessage(t),i(t)}}}function mt(e,n){n||(n=t.useRef(null));const[r,o]=t.useState(null),{camera_id:a,stream_mode:l,stream_type:c,is_local:u}=e,{broken:h,error:d,setErrorStatus:p}=pt(n),m=ot(n,!d);return t.useEffect(()=>{var e;(e={camera_id:a,stream_mode:l,stream_type:c,is_local:u},Je.get("/video/preview",e)).then(e=>{h||(o(e),p(!1))}).catch(e=>{n.current.showMessage(`${e.code} ${e.message}`)})},[e.camera_id]),s.createElement(Ye,i({ref:n},e,{url:r,autoplay:!0,shouldRender:!0,isLive:!0}),s.createElement("div",{className:"player-video-bottom",style:{height:32,visibility:m?"visible":"hidden"}},s.createElement(rt,{playerRef:n})))}function ft(e,n){n||(n=t.useRef(null));const[r,o]=t.useState(null),[a,l]=t.useState(null),[c,u]=t.useState([]),[h,d]=t.useState(!1!==e.progress),{broken:p,error:m,setErrorStatus:f}=pt(n),y=ot(n,!m),b=t.useRef(null);function g(t,s){const{camera_id:i,source_type:r,stream_mode:o,is_local:a,rate:c}=e;return(u={camera_id:i,stream_mode:o,source_type:r,start_time:t,end_time:s,is_local:a,rate:c},Je.get("/video/record/replay-url",u)).then(({url:e,id:t})=>{if(!p)return l(t),b.current=t,e}).catch(e=>{n.current.showMessage(`${e.code} ${e.message}`)});var u}function v(){n.current.pause()}function Z(t){n.current.seek(()=>g(t,e.end_time))}return t.useEffect(()=>{const{start_time:t,end_time:s}=e;!function(t,s){const{camera_id:i,source_type:r}=e;(o={camera_id:i,source_type:r,start_time:t,end_time:s},Je.get("/video/files",o)).then(e=>{!function(e,t,n){let s=[];e.forEach(e=>{e.start_time<t&&(e.start_time=t),e.end_time>n&&(e.end_time=n);let i=s[s.length-1];i&&e.start_time===i.end_time?(i.end_time=e.end_time,s[s.length-1]={...i}):s.push({...e})}),u(s)}(e,t,s)}).catch(e=>{n.current.showMessage(`${e.error} ${e.message}`)});var o}(t,s),g(t,s).then(e=>{o(e),e&&f(!1)})},[e.camera_id,e.start_time,e.end_time]),s.createElement(s.Fragment,null,s.createElement(Ye,i({ref:n},e,{url:r,autoplay:!0,shouldRender:!0,pauseCallback:v,seekCallback:Z}),s.createElement("div",{className:"player-video-bottom",style:{height:h?"120px":"25px",visibility:y?"visible":"hidden"}},s.createElement("div",{className:"player-video-btnWrap"},h?s.createElement(Ie,{type:"close",className:"player-video-btnWrap-btn",onClick:function(){d(!1)}}):s.createElement(Ie,{type:"open",className:"player-video-btnWrap-btn",onClick:function(){d(!0)}})),s.createElement(rt,{playerRef:n}),s.createElement(it,i({playerRef:n},e,{id:a,fileData:c,pauseCallback:v,seekCallback:Z})))))}function yt(e,n){n||(n=t.useRef(null));const{broken:r,error:o,setErrorStatus:a}=pt(n),l=ot(n,!o);return t.useEffect(()=>{e.url&&!r&&a(!1)},[e.url]),s.createElement(Ye,i({ref:n,autoplay:!0,shouldRender:!0,isLive:!0},e),s.createElement("div",{className:"player-video-bottom",style:{height:32,visibility:l?"visible":"hidden"}},s.createElement(rt,{playerRef:n})))}mt=s.forwardRef(mt),ft=s.forwardRef(ft),yt=s.forwardRef(yt),function(e){var t,n='<svg><symbol id="iconopen" viewBox="0 0 1024 1024"><path d="M894.31191406 389.28183594L552.5 763.06044922a53.79082031 53.79082031 0 0 1-40.40507813 18.28212891 53.79082031 53.79082031 0 0 1-40.40859375-18.28212891L129.87441406 389.28183594c-16.68603516-17.62382812-21.84257812-43.31162109-13.21875-65.99970703s29.43720703-38.53125 53.62558594-40.68632813h683.34433594c24.28154297 2.06279297 45.18632812 17.81103516 53.81191406 40.59404297 8.71875 22.78125 3.56308594 48.37324219-13.12558594 66.09199219z"  ></path></symbol><symbol id="iconclose" viewBox="0 0 1024 1024"><path d="M129.68808594 634.71816406L471.5 260.93955078a53.79082031 53.79082031 0 0 1 40.40507813-18.28212891 53.79082031 53.79082031 0 0 1 40.40859375 18.28212891L894.12558594 634.71816406c16.68603516 17.62382812 21.84257812 43.31162109 13.21875 65.99970703s-29.43720703 38.53125-53.62558595 40.68632813l-683.34433593 1e-8c-24.28154297-2.06279297-45.18632812-17.81103516-53.81191406-40.59404297-8.71875-22.78125-3.56308594-48.37324219 13.12558594-66.0919922z"  ></path></symbol><symbol id="iconsingleframe" viewBox="0 0 1024 1024"><path d="M144.39853408 916.80564219c15.27794121 7.37679815 33.44832247 5.36756045 46.75030313-5.21106681l459.21065537-364.9653536c10.55614307-8.39220996 16.71336826-21.14196592 16.71336826-34.63102002 0-13.48905411-6.15722519-26.23881006-16.71336826-34.63102002l-459.21065537-364.96535361c-7.98208857-6.34519776-17.71349063-9.6063873-27.53033468-9.6063873-6.5340703 0-13.11131074 1.44621915-19.21906933 4.39531962-15.29323154 7.38219463-25.01384063 22.86429785-25.01384062 39.84208682L119.38559258 876.96355449C119.38469346 893.94134346 129.10530255 909.42344668 144.39853408 916.80564219zM207.86130635 238.70139629L551.73505976 511.99820088l-343.87375341 273.29680459L207.86130635 238.70139629zM805.07979161 858.98654317L805.07979161 156.27857891c0-27.48716367 22.28059335-49.76775703 49.76775702-49.76775704 27.48806279 0 49.76775703 22.28059335 49.76775703 49.76775703L904.61530654 858.98654317c0 27.48626455-22.28059335 49.76775703-49.76775703 49.76775703C827.36038584 908.7543002 805.07979161 886.47280771 805.07979161 858.98654317z"  ></path></symbol><symbol id="iconsync" viewBox="0 0 1024 1024"><path d="M417.32703828 417.31849443l488.15573027 0 0 488.15483115-488.15573027 0 0-488.15483115Z"  ></path><path d="M362.61173516 362.60319131L606.6720626 362.60319131 606.6720626 118.52577529 118.51633232 118.52577529 118.51633232 606.68150557 362.61173516 606.68150557Z"  ></path></symbol><symbol id="iconiconstop" viewBox="0 0 1024 1024"><path d="M276.11153281 117.01749834l470.5690544 0c86.63016445 0 156.85365323 70.54546992 156.85365321 157.57316543l0 472.71949629c0 87.01960078-70.22348877 157.57316542-156.85365321 157.57316543L276.11153281 904.88332549c-86.6220706 0-156.84555849-70.55356464-156.8455585-157.57316543l2e-8-472.71949629C119.26597344 187.56296826 189.48946221 117.01749834 276.11153281 117.01749834z"  ></path></symbol><symbol id="iconright" viewBox="0 0 1024 1024"><path d="M118.25 118.25h787.5v787.5H118.25V118.25z m723.95507813 63.54492188H181.79492187v660.49804687h660.49804688V181.79492187zM372.25390625 664.40234375L581.87304688 512 372.25390625 359.59765625l38.14453125-50.80078125L683.47460938 512 410.3984375 715.203125 372.25390625 664.40234375z"  ></path></symbol><symbol id="iconleft" viewBox="0 0 1024 1024"><path d="M905.75 118.25H118.25v787.5h787.5V118.25z m-723.95507813 63.54492188h660.49804688v660.49804687H181.79492187V181.79492187zM651.74609375 664.40234375L442.12695312 512 651.74609375 359.59765625l-38.14453125-50.80078125L340.52539062 512l273.07617188 203.203125 38.14453125-50.80078125z"  ></path></symbol><symbol id="iconcut" viewBox="0 0 1024 1024"><path d="M814.81066895 165.93066406c23.86951447 0 43.258667 19.38915253 43.25866699 43.258667v605.62133789c0 23.86951447-19.38915253 43.258667-43.258667 43.25866699H209.18933105c-23.86951447 0-43.258667-19.38915253-43.25866699-43.25866699V209.18933105c0-23.86951447 19.38915253-43.258667 43.258667-43.25866699h605.62133789m0-49.43847656H209.18933105C157.97415924 116.4921875 116.4921875 157.97415924 116.4921875 209.18933105v605.62133789c0 51.21517182 41.48197175 92.69714356 92.69714356 92.69714356h605.62133789c51.21517182 0 92.69714356-41.48197175 92.69714355-92.69714356V209.18933105c0-51.21517182-41.48197175-92.69714356-92.69714355-92.69714355z" fill="" ></path><path d="M685.03466797 487.28076172H338.96533203c-13.67282868 0-24.71923828 11.04640961-24.71923828 24.71923828s11.04640961 24.71923828 24.71923828 24.71923828h346.06933594c13.67282868 0 24.71923828-11.04640961 24.71923828-24.71923828s-11.04640961-24.71923828-24.71923828-24.71923828z" fill="" ></path></symbol><symbol id="iconadd" viewBox="0 0 1024 1024"><path d="M862.29546875 826.3559375c-2.295 45.48234375-58.22296875 35.70328125-89.319375 35.70328125H239.36328125c-29.4553125 0-68.90484375 3.57328125-68.90484375-38.70703125v-106.04671875-392.293125-113.805c0-40.48734375 33.12984375-40.9978125 63.061875-40.9978125H765.2684375c28.31203125 0 75.8615625-9.01546875 93.05296875 19.2796875 5.61515625 9.24328125 3.9740625 23.135625 3.9740625 33.64875V826.3559375c0 27.2025 42.1875 27.2025 42.1875 0V221.66140625c0-13.095 0.02109375-25.29984375-3.3075-38.23875-8.6821875-33.76265625-42.90046875-55.39640625-76.41-55.39640625H213.32515625c-50.304375 0-85.05 34.745625-85.05 85.05v611.45296875c0 36.13359375 22.15265625 64.24734375 55.39640625 76.41 11.8209375 4.3284375 25.74703125 3.3075 38.23875 3.3075H826.5921875c43.925625 0 75.75609375-35.63578125 77.89078125-77.89078125 1.37109375-27.20671875-40.820625-27.07171875-42.1875 0z"  ></path><path d="M495.2853125 279.88015625v472.5c0 27.2025 42.18328125 27.2025 42.18328125 0v-472.5c0-27.2025-42.18328125-27.2025-42.18328125 0z"  ></path><path d="M280.1290625 537.22390625h472.49578125c27.2025 0 27.2025-42.1875 0-42.1875H280.1290625c-27.20671875 0-27.20671875 42.1875 0 42.1875z"  ></path></symbol><symbol id="iconfullscreen" viewBox="0 0 1024 1024"><path d="M148.86663321 643.52658191h0.10791492a32.37444571 32.37444571 0 0 1 32.37444573 32.37444571V869.73762596a32.37444571 32.37444571 0 0 1-32.37444573 32.37444571H148.86663321a32.37444571 32.37444571 0 0 1-32.37444571-32.37444571V675.90102762a32.37444571 32.37444571 0 0 1 32.37444571-32.37444572z"  ></path><path d="M149.9457817 837.46030367h194.73229143a32.37444571 32.37444571 0 0 1 32.37444573 32.37444572 32.37444571 32.37444571 0 0 1-32.37444573 32.37444572H149.9457817a32.37444571 32.37444571 0 0 1-32.37444573-32.37444572 32.37444571 32.37444571 0 0 1 32.37444572-32.37444572z"  ></path><path d="M126.91675917 891.21267511a32.2449478 32.2449478 0 0 1 0.74461221-45.70192656l264.06756255-254.77609678a32.37444571 32.37444571 0 1 1 45.10839445 46.40337277L172.76976583 891.95728731a32.50394362 32.50394362 0 0 1-45.85300665-0.7446122zM875.03624335 120.80878063h0.09712344a32.37444571 32.37444571 0 0 1 32.37444571 32.3744457v193.84738984a32.37444571 32.37444571 0 0 1-32.37444571 32.37444573h-0.09712344a32.37444571 32.37444571 0 0 1-32.37444571-32.37444573V153.18322633a32.37444571 32.37444571 0 0 1 32.37444571-32.3744457z"  ></path><path d="M679.32192687 120.80878063H874.0542183a32.37444571 32.37444571 0 0 1 32.37444573 32.3744457 32.37444571 32.37444571 0 0 1-32.37444572 32.37444572H679.32192687a32.37444571 32.37444571 0 0 1-32.37444573-32.37444572 32.37444571 32.37444571 0 0 1 32.37444572-32.3744457z"  ></path><path d="M897.08324083 131.70817721a32.2449478 32.2449478 0 0 1-0.74461221 45.70192576l-264.06756255 254.78688829a32.37444571 32.37444571 0 1 1-45.10839445-46.40337201l264.06756255-254.7760968a32.50394362 32.50394362 0 0 1 45.85300666 0.69065474zM154.26237404 116.4921875h193.83659834a32.37444571 32.37444571 0 0 1 32.37444572 32.37444571v0.09712344a32.37444571 32.37444571 0 0 1-32.37444571 32.37444571H154.26237404a32.37444571 32.37444571 0 0 1-32.37444571-32.37444571V148.86663321A32.37444571 32.37444571 0 0 1 154.26237404 116.4921875z"  ></path><path d="M154.26237404 117.57133597a32.37444571 32.37444571 0 0 1 32.37444571 32.37444573v194.78624812a32.37444571 32.37444571 0 0 1-32.37444571 32.37444649 32.37444571 32.37444571 0 0 1-32.37444571-32.37444649V149.9457817A32.37444571 32.37444571 0 0 1 154.26237404 117.57133597z"  ></path><path d="M132.78732489 126.91675917a32.2449478 32.2449478 0 0 1 45.70192656 0.74461221l254.77609678 264.06756255a32.37444571 32.37444571 0 1 1-46.40337277 45.10839445L132.04271269 172.76976583a32.50394362 32.50394362 0 0 1 0.7446122-45.85300665zM676.96938383 842.66179764H870.81677367a32.37444571 32.37444571 0 0 1 32.3744457 32.37444571v0.09712344a32.37444571 32.37444571 0 0 1-32.3744457 32.37444571H676.96938383a32.37444571 32.37444571 0 0 1-32.37444573-32.37444571v-0.09712344a32.37444571 32.37444571 0 0 1 32.37444573-32.37444571z"  ></path><path d="M870.81677367 646.99064711a32.37444571 32.37444571 0 0 1 32.3744457 32.37444572V874.0542183a32.37444571 32.37444571 0 0 1-32.3744457 32.37444573 32.37444571 32.37444571 0 0 1-32.37444572-32.37444572V679.32192687a32.37444571 32.37444571 0 0 1 32.37444572-32.33127976z"  ></path><path d="M892.29182279 897.08324083a32.2449478 32.2449478 0 0 1-45.70192576-0.74461221l-254.78688829-264.06756255a32.37444571 32.37444571 0 1 1 46.40337201-45.10839445l254.7760968 264.06756255a32.50394362 32.50394362 0 0 1-0.69065474 45.85300666z"  ></path></symbol><symbol id="iconloading" viewBox="0 0 1024 1024"><path d="M873.29375001 569.0375c-15.1875-3.6-30.20625001 5.79375001-33.86250002 20.86875001C803.31875001 742.7375 668.375 849.5 511.38124999 849.5c-94.78125001 0-181.06875001-39.375-242.83124999-103.89375001-7.70625001-7.93125001-14.34375001-16.425-21.09375001-24.91874999-5.4-6.80625001-10.9125-13.3875-15.74999998-20.64374999-4.44375001-6.525-8.04374999-13.44375001-11.92500002-20.19375001-5.85-10.18125001-11.64375001-20.30625001-16.48124999-31.1625-2.025-4.6125-3.4875-9.3375-5.2875-14.00624999C192.78124999 621.29375001 188 607.68125001 184.4 593.39375001c-14.11875001-56.75625001-12.9375-116.325 3.4875-173.58750002C191.4875 407.375 195.14374999 395 199.98124999 383.24374999c5.34375001-12.88125001 11.98125001-25.25625001 19.01250002-37.63124999C277.60624999 241.94375001 387.125 174.5 511.38124999 174.5c157.05 0 291.9375 106.7625 328.10625001 259.59375001C842.525 447.0875 854.05625001 455.75 866.825 455.75c2.19375001 0 4.275-0.225 6.46875001-0.7875 15.1875-3.54375001 24.525-18.73125001 20.86874999-33.8625C851.975 242.84374999 694.53125001 118.25 511.38124999 118.25 371.54374999 118.25 247.175 191.15 177.0875 304.83124999 176.91874999 305.1125 176.6375 305.28124999 176.46874999 305.5625 173.76874999 309.89374999 172.1375 314.61874999 169.6625 319.00624999 161.84374999 332.84374999 154.19374999 346.7375 148.11874999 361.64374999c-5.90625001 14.175-10.06875001 28.6875-14.23124999 43.25625001C132.3125 410.35624999 129.89374999 415.475 128.54374999 421.15624999 128.43124999 421.55 128.6 421.8875 128.4875 422.28124999 114.5375 481.0625 115.15624999 541.53125001 128.43124999 599.69375001c0.1125 1.125-0.1125 2.08124999 0.11250002 3.20624999 0.3375 1.40625001 1.0125 2.75625001 1.35 4.1625 4.05 16.36874999 9.5625 32.23125001 15.75 48.0375 2.08124999 5.45625001 3.825 11.025 6.24374999 16.36874999 5.5125 12.54375001 12.31875001 24.525 19.2375 36.39375001 4.5 7.9875 8.775 15.975 13.78125001 23.5125 5.7375 8.38125001 12.2625 16.3125 18.61874999 24.4125 7.81875001 9.9 15.58125001 19.6875 24.3 28.74374999 1.8 1.9125 3.20625001 4.10625001 5.0625 5.9625l0.675-0.675C305.3375 861.7625 403.55 905.75 511.38124999 905.75c183.15 0 340.59375001-124.59375001 382.78125001-302.90625001C897.7625 587.76875001 888.425 572.58125001 873.29375001 569.0375z"  ></path></symbol><symbol id="iconplay" viewBox="0 0 1024 1024"><path d="M859.97188741 465.05141158L219.26174595 67.36925455c-35.90186097-22.0934536-82.85044939 5.52336372-82.85044938 46.94858842v795.36431406c0 41.42522469 46.94858842 69.04204071 82.85044938 46.94858842l637.94846025-397.68215703c38.66354348-19.33177108 38.66354348-74.56540445 2.76168121-93.89717684z"  ></path></symbol><symbol id="iconpause" viewBox="0 0 1024 1024"><path d="M349.866667 149.333333h-14.933334c-21.333333 0-36.266667 14.933333-36.266666 34.133334v654.933333c0 19.2 14.933333 34.133333 34.133333 34.133333h14.933333c19.2 0 34.133333-14.933333 34.133334-34.133333V183.466667c2.133333-19.2-12.8-34.133333-32-34.133334z m341.333333 0h-14.933333c-21.333333 0-36.266667 14.933333-36.266667 34.133334v654.933333c0 19.2 14.933333 34.133333 34.133333 34.133333h14.933334c19.2 0 34.133333-14.933333 34.133333-34.133333V183.466667c2.133333-19.2-12.8-34.133333-32-34.133334z"  ></path></symbol><symbol id="iconmute" viewBox="0 0 1024 1024"><path d="M525.65333333 125.1555552h-2.2755552c-9.10222187 0-18.2044448 2.2755552-27.30666666 9.10222293-134.25777813 116.05333333-204.8 177.49333333-211.62666667 184.32H175.21777813c-13.65333333 0-25.03111147 4.55111147-34.13333333 13.65333334-11.37777813 11.37777813-15.92888853 22.7555552-15.9288896 34.13333333v295.82222187c0 13.65333333 4.55111147 25.03111147 13.65333333 34.13333333 9.10222187 9.10222187 20.48 13.65333333 34.13333334 13.65333333H284.4444448c2.2755552 2.2755552 22.7555552 20.48 56.88888853 50.06222187 34.13333333 29.58222187 70.54222187 59.1644448 102.4 86.47111147 34.13333333 27.30666667 50.06222187 43.2355552 52.33777814 43.2355552 9.10222187 6.82666667 18.2044448 9.10222187 27.30666666 9.10222293h2.2755552c18.2044448-2.2755552 29.58222187-13.65333333 34.13333334-34.13333333v-705.42222294c-4.55111147-20.48-15.92888853-31.85777813-34.13333334-34.13333333z m-9.10222186 721.35111147c-6.82666667-4.55111147-211.62666667-182.0444448-211.62666667-182.0444448H172.94222187V361.81333333h131.98222293s50.06222187-45.51111147 211.62666667-186.5955552v671.28888854zM794.16888853 512l95.57333334-95.57333333c9.10222187-9.10222187 9.10222187-22.7555552 0-31.85777814s-22.7555552-9.10222187-31.85777707 0L762.31111147 480.14222187l-95.57333334-95.57333334c-9.10222187-9.10222187-22.7555552-9.10222187-31.85777813 0s-9.10222187 22.7555552 0 31.85777814l95.57333333 95.57333333-95.57333333 95.57333333c-9.10222187 9.10222187-9.10222187 22.7555552 0 31.85777814s22.7555552 9.10222187 31.85777813 0l95.57333334-95.57333334 95.57333333 95.57333334c9.10222187 9.10222187 22.7555552 9.10222187 31.85777707 0s9.10222187-22.7555552 0-31.85777814L794.16888853 512z"  ></path></symbol><symbol id="iconvolume" viewBox="0 0 1024 1024"><path d="M535.466667 149.333333H533.333333c-8.533333 0-17.066667 2.133333-25.6 8.533334-125.866667 108.8-192 166.4-198.4 172.8H204.8c-12.8 0-23.466667 4.266667-32 12.8-8.533333 8.533333-12.8 19.2-12.8 32v277.333333c0 12.8 4.266667 23.466667 12.8 32 8.533333 8.533333 19.2 12.8 32 12.8h102.4c2.133333 2.133333 21.333333 19.2 53.333333 46.933333 32 27.733333 66.133333 55.466667 96 81.066667 32 25.6 46.933333 40.533333 49.066667 40.533333 8.533333 6.4 17.066667 8.533333 25.6 8.533334h2.133333c17.066667-2.133333 27.733333-12.8 32-32v-661.333334c-2.133333-19.2-12.8-29.866667-29.866666-32z m-10.666667 676.266667c-6.4-4.266667-198.4-170.666667-198.4-170.666667H202.666667V371.2h123.733333s46.933333-42.666667 198.4-174.933333v629.333333z m262.4-535.466667c-8.533333-10.666667-21.333333-10.666667-32-2.133333-8.533333 8.533333-8.533333 19.2-2.133333 27.733333 42.666667 53.333333 68.266667 121.6 68.266666 196.266667 0 74.666667-25.6 142.933333-68.266666 196.266667-6.4 8.533333-6.4 19.2 2.133333 27.733333s23.466667 8.533333 32-2.133333c49.066667-61.866667 76.8-138.666667 76.8-224s-29.866667-157.866667-76.8-219.733334z m-123.733333 89.6c-8.533333 8.533333-8.533333 19.2-4.266667 25.6 21.333333 29.866667 32 68.266667 32 106.666667 0 40.533333-12.8 76.8-32 106.666667-6.4 8.533333-4.266667 19.2 2.133333 25.6 8.533333 8.533333 23.466667 8.533333 32-2.133334 25.6-38.4 40.533333-83.2 40.533334-130.133333 0-49.066667-14.933333-93.866667-40.533334-130.133333-4.266667-10.666667-19.2-12.8-29.866666-2.133334z"  ></path></symbol><symbol id="iconexitfullscreen" viewBox="0 0 1024 1024"><path d="M692 842v-90c0-51 39-90 90-90h90c18 0 30-12 30-30s-12-30-30-30h-90c-84 0-150 66-150 150v90c0 18 12 30 30 30s30-12 30-30z m-60-660v90c0 84 66 150 150 150h90c18 0 30-12 30-30s-12-30-30-30h-90c-51 0-90-39-90-90v-90c0-18-12-30-30-30s-30 12-30 30z m-240 660v-90c0-84-66-150-150-150h-90c-18 0-30 12-30 30s12 30 30 30h90c51 0 90 39 90 90v90c0 18 12 30 30 30s30-12 30-30z m-60-660v90c0 51-39 90-90 90h-90c-18 0-30 12-30 30s12 30 30 30h90c84 0 150-66 150-150v-90c0-18-12-30-30-30s-30 12-30 30z"  ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{var n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()};document.addEventListener("DOMContentLoaded",n,!1)}else document.attachEvent&&(i=t,r=e.document,o=!1,(a=function(){try{r.documentElement.doScroll("left")}catch(e){return void setTimeout(a,50)}s()})(),r.onreadystatechange=function(){"complete"==r.readyState&&(r.onreadystatechange=null,s())});function s(){o||(o=!0,i())}var i,r,o,a}((function(){var e,t,s,i,r,o;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",s=t,(i=document.body).firstChild?(r=s,(o=i.firstChild).parentNode.insertBefore(r,o)):i.appendChild(s))}))}(window),e.PreviewPlayer=mt,e.ReplayPlayer=ft,e.UrlPlayer=yt,Object.defineProperty(e,"__esModule",{value:!0})}));
